<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>snote</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/snote/img/logo.png">
    <meta name="description" content="study note">
    
    <link rel="preload" href="/snote/assets/css/0.styles.733b32e4.css" as="style"><link rel="preload" href="/snote/assets/js/app.3cc04e36.js" as="script"><link rel="preload" href="/snote/assets/js/5.22329d81.js" as="script"><link rel="preload" href="/snote/assets/js/1.5e23c49c.js" as="script"><link rel="preload" href="/snote/assets/js/126.10649710.js" as="script"><link rel="preload" href="/snote/assets/js/77.11cc1a2c.js" as="script"><link rel="prefetch" href="/snote/assets/js/10.1e6036a4.js"><link rel="prefetch" href="/snote/assets/js/100.e53901ab.js"><link rel="prefetch" href="/snote/assets/js/101.7ff3bf92.js"><link rel="prefetch" href="/snote/assets/js/102.72df3fb1.js"><link rel="prefetch" href="/snote/assets/js/103.39232b43.js"><link rel="prefetch" href="/snote/assets/js/104.19b1fd3c.js"><link rel="prefetch" href="/snote/assets/js/105.a9e362b5.js"><link rel="prefetch" href="/snote/assets/js/106.77930f24.js"><link rel="prefetch" href="/snote/assets/js/107.ea9f01d0.js"><link rel="prefetch" href="/snote/assets/js/108.7ff74d7c.js"><link rel="prefetch" href="/snote/assets/js/109.e55033b4.js"><link rel="prefetch" href="/snote/assets/js/11.9b2b7f36.js"><link rel="prefetch" href="/snote/assets/js/110.d399212c.js"><link rel="prefetch" href="/snote/assets/js/111.9ca56f5e.js"><link rel="prefetch" href="/snote/assets/js/112.97d8e09c.js"><link rel="prefetch" href="/snote/assets/js/113.b00a35d2.js"><link rel="prefetch" href="/snote/assets/js/114.7071cc16.js"><link rel="prefetch" href="/snote/assets/js/115.71bfbee0.js"><link rel="prefetch" href="/snote/assets/js/116.d3cc8989.js"><link rel="prefetch" href="/snote/assets/js/117.52c30bbd.js"><link rel="prefetch" href="/snote/assets/js/118.d17bd671.js"><link rel="prefetch" href="/snote/assets/js/119.17200614.js"><link rel="prefetch" href="/snote/assets/js/12.8e64e191.js"><link rel="prefetch" href="/snote/assets/js/120.c4c779cd.js"><link rel="prefetch" href="/snote/assets/js/121.6e65fbc1.js"><link rel="prefetch" href="/snote/assets/js/122.304ccf9d.js"><link rel="prefetch" href="/snote/assets/js/123.b744823c.js"><link rel="prefetch" href="/snote/assets/js/124.f5ab81c9.js"><link rel="prefetch" href="/snote/assets/js/125.aaa33725.js"><link rel="prefetch" href="/snote/assets/js/127.f35b2900.js"><link rel="prefetch" href="/snote/assets/js/128.833a1e82.js"><link rel="prefetch" href="/snote/assets/js/129.83493639.js"><link rel="prefetch" href="/snote/assets/js/13.d156e68f.js"><link rel="prefetch" href="/snote/assets/js/130.3c356544.js"><link rel="prefetch" href="/snote/assets/js/131.77654b97.js"><link rel="prefetch" href="/snote/assets/js/132.3e636caa.js"><link rel="prefetch" href="/snote/assets/js/133.b8a7f38a.js"><link rel="prefetch" href="/snote/assets/js/134.35ccee41.js"><link rel="prefetch" href="/snote/assets/js/135.13f63617.js"><link rel="prefetch" href="/snote/assets/js/136.2cd53605.js"><link rel="prefetch" href="/snote/assets/js/137.8331c390.js"><link rel="prefetch" href="/snote/assets/js/138.0c433171.js"><link rel="prefetch" href="/snote/assets/js/139.a6287a10.js"><link rel="prefetch" href="/snote/assets/js/14.41b00a6a.js"><link rel="prefetch" href="/snote/assets/js/140.53857f35.js"><link rel="prefetch" href="/snote/assets/js/141.173a51f6.js"><link rel="prefetch" href="/snote/assets/js/142.ea2a40cd.js"><link rel="prefetch" href="/snote/assets/js/143.bf22752b.js"><link rel="prefetch" href="/snote/assets/js/144.ee4de6bb.js"><link rel="prefetch" href="/snote/assets/js/145.c3171214.js"><link rel="prefetch" href="/snote/assets/js/146.3784d416.js"><link rel="prefetch" href="/snote/assets/js/147.724d5523.js"><link rel="prefetch" href="/snote/assets/js/148.887b57b8.js"><link rel="prefetch" href="/snote/assets/js/149.365a3713.js"><link rel="prefetch" href="/snote/assets/js/15.d7973cb5.js"><link rel="prefetch" href="/snote/assets/js/150.5a119004.js"><link rel="prefetch" href="/snote/assets/js/151.35989bab.js"><link rel="prefetch" href="/snote/assets/js/152.a53a5bcf.js"><link rel="prefetch" href="/snote/assets/js/153.c49175be.js"><link rel="prefetch" href="/snote/assets/js/154.132d5c92.js"><link rel="prefetch" href="/snote/assets/js/155.4d2859d7.js"><link rel="prefetch" href="/snote/assets/js/156.24fa7e30.js"><link rel="prefetch" href="/snote/assets/js/157.d00b5ab7.js"><link rel="prefetch" href="/snote/assets/js/158.58345bf0.js"><link rel="prefetch" href="/snote/assets/js/159.30fd6c79.js"><link rel="prefetch" href="/snote/assets/js/16.2a0f8a1e.js"><link rel="prefetch" href="/snote/assets/js/160.0415e6c5.js"><link rel="prefetch" href="/snote/assets/js/161.af36ab6d.js"><link rel="prefetch" href="/snote/assets/js/162.3f15c754.js"><link rel="prefetch" href="/snote/assets/js/163.b29fc431.js"><link rel="prefetch" href="/snote/assets/js/164.9bcd2f56.js"><link rel="prefetch" href="/snote/assets/js/165.3b91ca92.js"><link rel="prefetch" href="/snote/assets/js/166.749c6ca6.js"><link rel="prefetch" href="/snote/assets/js/167.d48009c9.js"><link rel="prefetch" href="/snote/assets/js/168.c36d8d5d.js"><link rel="prefetch" href="/snote/assets/js/169.ae085a84.js"><link rel="prefetch" href="/snote/assets/js/17.4ffd4119.js"><link rel="prefetch" href="/snote/assets/js/170.fca3db2e.js"><link rel="prefetch" href="/snote/assets/js/171.7696e010.js"><link rel="prefetch" href="/snote/assets/js/172.1c40e807.js"><link rel="prefetch" href="/snote/assets/js/173.9b50a23b.js"><link rel="prefetch" href="/snote/assets/js/174.58befaba.js"><link rel="prefetch" href="/snote/assets/js/175.e1b9ba0f.js"><link rel="prefetch" href="/snote/assets/js/176.ec0983d0.js"><link rel="prefetch" href="/snote/assets/js/177.36734ab4.js"><link rel="prefetch" href="/snote/assets/js/178.fe90bfd6.js"><link rel="prefetch" href="/snote/assets/js/179.76053104.js"><link rel="prefetch" href="/snote/assets/js/18.f6fa6b40.js"><link rel="prefetch" href="/snote/assets/js/180.b015d622.js"><link rel="prefetch" href="/snote/assets/js/181.9b717ca0.js"><link rel="prefetch" href="/snote/assets/js/182.7f4cf041.js"><link rel="prefetch" href="/snote/assets/js/183.bb178fad.js"><link rel="prefetch" href="/snote/assets/js/184.7bcfa00d.js"><link rel="prefetch" href="/snote/assets/js/185.bca06eaf.js"><link rel="prefetch" href="/snote/assets/js/186.b5a2ae31.js"><link rel="prefetch" href="/snote/assets/js/187.54d67a16.js"><link rel="prefetch" href="/snote/assets/js/188.4c672878.js"><link rel="prefetch" href="/snote/assets/js/189.c4ff0da3.js"><link rel="prefetch" href="/snote/assets/js/19.4e10afcb.js"><link rel="prefetch" href="/snote/assets/js/190.c04cba39.js"><link rel="prefetch" href="/snote/assets/js/191.47277121.js"><link rel="prefetch" href="/snote/assets/js/192.2df35df1.js"><link rel="prefetch" href="/snote/assets/js/193.6522b845.js"><link rel="prefetch" href="/snote/assets/js/194.b0ab5764.js"><link rel="prefetch" href="/snote/assets/js/195.28c85e74.js"><link rel="prefetch" href="/snote/assets/js/196.6b6c7db3.js"><link rel="prefetch" href="/snote/assets/js/197.11fe146e.js"><link rel="prefetch" href="/snote/assets/js/198.d68ebf1f.js"><link rel="prefetch" href="/snote/assets/js/199.b813b835.js"><link rel="prefetch" href="/snote/assets/js/20.3b3c1d36.js"><link rel="prefetch" href="/snote/assets/js/200.b3956510.js"><link rel="prefetch" href="/snote/assets/js/201.9ae9098a.js"><link rel="prefetch" href="/snote/assets/js/202.a2a5abba.js"><link rel="prefetch" href="/snote/assets/js/203.6c78ac54.js"><link rel="prefetch" href="/snote/assets/js/204.07229555.js"><link rel="prefetch" href="/snote/assets/js/205.007d975e.js"><link rel="prefetch" href="/snote/assets/js/206.053c9ad1.js"><link rel="prefetch" href="/snote/assets/js/207.9dc2d2a1.js"><link rel="prefetch" href="/snote/assets/js/208.3ebf2372.js"><link rel="prefetch" href="/snote/assets/js/209.1bef9845.js"><link rel="prefetch" href="/snote/assets/js/21.54f98d7e.js"><link rel="prefetch" href="/snote/assets/js/210.d0a49b1e.js"><link rel="prefetch" href="/snote/assets/js/211.9867a469.js"><link rel="prefetch" href="/snote/assets/js/212.69fd5be2.js"><link rel="prefetch" href="/snote/assets/js/213.8f82a998.js"><link rel="prefetch" href="/snote/assets/js/214.823be3c5.js"><link rel="prefetch" href="/snote/assets/js/215.678426f8.js"><link rel="prefetch" href="/snote/assets/js/216.0564d748.js"><link rel="prefetch" href="/snote/assets/js/217.ea5120a3.js"><link rel="prefetch" href="/snote/assets/js/218.b259e9f5.js"><link rel="prefetch" href="/snote/assets/js/219.7103afc4.js"><link rel="prefetch" href="/snote/assets/js/22.2aac9b21.js"><link rel="prefetch" href="/snote/assets/js/220.294118e9.js"><link rel="prefetch" href="/snote/assets/js/221.fc705f9e.js"><link rel="prefetch" href="/snote/assets/js/222.82415480.js"><link rel="prefetch" href="/snote/assets/js/223.34d2d18a.js"><link rel="prefetch" href="/snote/assets/js/224.0dae4c03.js"><link rel="prefetch" href="/snote/assets/js/225.1200b289.js"><link rel="prefetch" href="/snote/assets/js/226.3f3df43d.js"><link rel="prefetch" href="/snote/assets/js/227.c7ecd98d.js"><link rel="prefetch" href="/snote/assets/js/228.1c820734.js"><link rel="prefetch" href="/snote/assets/js/229.42a94887.js"><link rel="prefetch" href="/snote/assets/js/23.4d176be4.js"><link rel="prefetch" href="/snote/assets/js/230.2fad6960.js"><link rel="prefetch" href="/snote/assets/js/231.ce9d1a71.js"><link rel="prefetch" href="/snote/assets/js/232.c63516ab.js"><link rel="prefetch" href="/snote/assets/js/233.49851721.js"><link rel="prefetch" href="/snote/assets/js/234.e8b507d2.js"><link rel="prefetch" href="/snote/assets/js/235.d33e513e.js"><link rel="prefetch" href="/snote/assets/js/236.87e4e820.js"><link rel="prefetch" href="/snote/assets/js/237.d58c3ffb.js"><link rel="prefetch" href="/snote/assets/js/238.5082bd37.js"><link rel="prefetch" href="/snote/assets/js/239.5802e4fa.js"><link rel="prefetch" href="/snote/assets/js/24.80d247cf.js"><link rel="prefetch" href="/snote/assets/js/240.bd7f4259.js"><link rel="prefetch" href="/snote/assets/js/241.d135df38.js"><link rel="prefetch" href="/snote/assets/js/242.67bd6281.js"><link rel="prefetch" href="/snote/assets/js/243.dda77da4.js"><link rel="prefetch" href="/snote/assets/js/244.5ced0265.js"><link rel="prefetch" href="/snote/assets/js/245.76aa7524.js"><link rel="prefetch" href="/snote/assets/js/246.690093e7.js"><link rel="prefetch" href="/snote/assets/js/247.3127d466.js"><link rel="prefetch" href="/snote/assets/js/248.dbe63ed3.js"><link rel="prefetch" href="/snote/assets/js/249.fe2ef438.js"><link rel="prefetch" href="/snote/assets/js/25.63eaaf87.js"><link rel="prefetch" href="/snote/assets/js/250.1549a447.js"><link rel="prefetch" href="/snote/assets/js/251.db65678e.js"><link rel="prefetch" href="/snote/assets/js/252.e6b08a3c.js"><link rel="prefetch" href="/snote/assets/js/253.c60596c3.js"><link rel="prefetch" href="/snote/assets/js/254.cc49031e.js"><link rel="prefetch" href="/snote/assets/js/255.815e4537.js"><link rel="prefetch" href="/snote/assets/js/256.497750f6.js"><link rel="prefetch" href="/snote/assets/js/257.fd4a510f.js"><link rel="prefetch" href="/snote/assets/js/258.e1d62930.js"><link rel="prefetch" href="/snote/assets/js/259.42dad2e9.js"><link rel="prefetch" href="/snote/assets/js/26.70fb8da2.js"><link rel="prefetch" href="/snote/assets/js/260.a826fe7a.js"><link rel="prefetch" href="/snote/assets/js/261.220b0562.js"><link rel="prefetch" href="/snote/assets/js/262.df8af257.js"><link rel="prefetch" href="/snote/assets/js/263.e8218053.js"><link rel="prefetch" href="/snote/assets/js/264.88e08802.js"><link rel="prefetch" href="/snote/assets/js/265.f936d179.js"><link rel="prefetch" href="/snote/assets/js/266.a05c3940.js"><link rel="prefetch" href="/snote/assets/js/267.a7a75213.js"><link rel="prefetch" href="/snote/assets/js/268.33bfc335.js"><link rel="prefetch" href="/snote/assets/js/269.6e869285.js"><link rel="prefetch" href="/snote/assets/js/27.1f5790a0.js"><link rel="prefetch" href="/snote/assets/js/270.6ffca78a.js"><link rel="prefetch" href="/snote/assets/js/271.ac1fb068.js"><link rel="prefetch" href="/snote/assets/js/272.13e569b2.js"><link rel="prefetch" href="/snote/assets/js/273.2ce712d9.js"><link rel="prefetch" href="/snote/assets/js/274.d66f80d4.js"><link rel="prefetch" href="/snote/assets/js/275.de571766.js"><link rel="prefetch" href="/snote/assets/js/276.f3b29147.js"><link rel="prefetch" href="/snote/assets/js/277.b76178a1.js"><link rel="prefetch" href="/snote/assets/js/278.56362141.js"><link rel="prefetch" href="/snote/assets/js/279.25b22240.js"><link rel="prefetch" href="/snote/assets/js/28.5ef486f6.js"><link rel="prefetch" href="/snote/assets/js/280.0028cb8e.js"><link rel="prefetch" href="/snote/assets/js/281.19110b74.js"><link rel="prefetch" href="/snote/assets/js/282.92106866.js"><link rel="prefetch" href="/snote/assets/js/283.986ffec9.js"><link rel="prefetch" href="/snote/assets/js/284.c24532a5.js"><link rel="prefetch" href="/snote/assets/js/285.f53857b8.js"><link rel="prefetch" href="/snote/assets/js/286.b1f41b19.js"><link rel="prefetch" href="/snote/assets/js/287.b8c0d28b.js"><link rel="prefetch" href="/snote/assets/js/288.77b2860b.js"><link rel="prefetch" href="/snote/assets/js/289.d0a5c87b.js"><link rel="prefetch" href="/snote/assets/js/29.c1aa7b05.js"><link rel="prefetch" href="/snote/assets/js/290.a2b5aa3a.js"><link rel="prefetch" href="/snote/assets/js/291.8d3fa552.js"><link rel="prefetch" href="/snote/assets/js/292.ec03d81e.js"><link rel="prefetch" href="/snote/assets/js/293.98696bcb.js"><link rel="prefetch" href="/snote/assets/js/294.fe6857c9.js"><link rel="prefetch" href="/snote/assets/js/295.618179f3.js"><link rel="prefetch" href="/snote/assets/js/296.9ef57bc6.js"><link rel="prefetch" href="/snote/assets/js/297.f252aac1.js"><link rel="prefetch" href="/snote/assets/js/298.5e1c84a5.js"><link rel="prefetch" href="/snote/assets/js/299.309fb772.js"><link rel="prefetch" href="/snote/assets/js/3.c1ff7317.js"><link rel="prefetch" href="/snote/assets/js/30.4bb90738.js"><link rel="prefetch" href="/snote/assets/js/300.4e4d323e.js"><link rel="prefetch" href="/snote/assets/js/301.3a31e029.js"><link rel="prefetch" href="/snote/assets/js/302.d5214ae9.js"><link rel="prefetch" href="/snote/assets/js/303.df064523.js"><link rel="prefetch" href="/snote/assets/js/304.f9eb1bf7.js"><link rel="prefetch" href="/snote/assets/js/305.4d6612e0.js"><link rel="prefetch" href="/snote/assets/js/306.8acfffc4.js"><link rel="prefetch" href="/snote/assets/js/307.ba54d579.js"><link rel="prefetch" href="/snote/assets/js/308.d4473266.js"><link rel="prefetch" href="/snote/assets/js/309.a76d6b29.js"><link rel="prefetch" href="/snote/assets/js/31.b1ee51e2.js"><link rel="prefetch" href="/snote/assets/js/310.291ca423.js"><link rel="prefetch" href="/snote/assets/js/311.39a60e61.js"><link rel="prefetch" href="/snote/assets/js/312.36aa70af.js"><link rel="prefetch" href="/snote/assets/js/313.68c1ba97.js"><link rel="prefetch" href="/snote/assets/js/314.65cd2f18.js"><link rel="prefetch" href="/snote/assets/js/315.36d2f5b8.js"><link rel="prefetch" href="/snote/assets/js/316.7fc1ad1f.js"><link rel="prefetch" href="/snote/assets/js/317.aef9d07a.js"><link rel="prefetch" href="/snote/assets/js/318.783cd3bc.js"><link rel="prefetch" href="/snote/assets/js/319.e7f7bb74.js"><link rel="prefetch" href="/snote/assets/js/32.415bb67d.js"><link rel="prefetch" href="/snote/assets/js/320.4858112b.js"><link rel="prefetch" href="/snote/assets/js/321.5c2d406d.js"><link rel="prefetch" href="/snote/assets/js/322.0ca7c95d.js"><link rel="prefetch" href="/snote/assets/js/323.2d6fbc1c.js"><link rel="prefetch" href="/snote/assets/js/324.982fef51.js"><link rel="prefetch" href="/snote/assets/js/325.c244b4d2.js"><link rel="prefetch" href="/snote/assets/js/326.dbf8ace0.js"><link rel="prefetch" href="/snote/assets/js/327.8f2c1ebe.js"><link rel="prefetch" href="/snote/assets/js/328.e8eb5fa6.js"><link rel="prefetch" href="/snote/assets/js/329.162c0bd5.js"><link rel="prefetch" href="/snote/assets/js/33.35a98693.js"><link rel="prefetch" href="/snote/assets/js/330.5c6cafc3.js"><link rel="prefetch" href="/snote/assets/js/331.27832ebd.js"><link rel="prefetch" href="/snote/assets/js/332.d924873c.js"><link rel="prefetch" href="/snote/assets/js/333.2a25fce8.js"><link rel="prefetch" href="/snote/assets/js/334.fc1972ba.js"><link rel="prefetch" href="/snote/assets/js/335.35bf5bc7.js"><link rel="prefetch" href="/snote/assets/js/336.14b855aa.js"><link rel="prefetch" href="/snote/assets/js/337.462cd198.js"><link rel="prefetch" href="/snote/assets/js/338.a4ada162.js"><link rel="prefetch" href="/snote/assets/js/339.cdccddf6.js"><link rel="prefetch" href="/snote/assets/js/34.a375d18a.js"><link rel="prefetch" href="/snote/assets/js/340.4ef3435a.js"><link rel="prefetch" href="/snote/assets/js/341.14e6591a.js"><link rel="prefetch" href="/snote/assets/js/342.d944b8a6.js"><link rel="prefetch" href="/snote/assets/js/343.5e6e1814.js"><link rel="prefetch" href="/snote/assets/js/344.60707e61.js"><link rel="prefetch" href="/snote/assets/js/345.25b2d6d9.js"><link rel="prefetch" href="/snote/assets/js/346.fe7a8f22.js"><link rel="prefetch" href="/snote/assets/js/347.8dc03771.js"><link rel="prefetch" href="/snote/assets/js/348.92e83ff5.js"><link rel="prefetch" href="/snote/assets/js/349.2f717ea8.js"><link rel="prefetch" href="/snote/assets/js/35.175c5eb9.js"><link rel="prefetch" href="/snote/assets/js/350.5d843d49.js"><link rel="prefetch" href="/snote/assets/js/351.07f15a6d.js"><link rel="prefetch" href="/snote/assets/js/352.a931cc83.js"><link rel="prefetch" href="/snote/assets/js/353.04a30c0b.js"><link rel="prefetch" href="/snote/assets/js/354.a7adb748.js"><link rel="prefetch" href="/snote/assets/js/355.ed562ee8.js"><link rel="prefetch" href="/snote/assets/js/356.c42cbb30.js"><link rel="prefetch" href="/snote/assets/js/357.30d3bca7.js"><link rel="prefetch" href="/snote/assets/js/358.8e4e9d5d.js"><link rel="prefetch" href="/snote/assets/js/359.b907912b.js"><link rel="prefetch" href="/snote/assets/js/36.a16c85c6.js"><link rel="prefetch" href="/snote/assets/js/360.5901ac19.js"><link rel="prefetch" href="/snote/assets/js/361.480746e5.js"><link rel="prefetch" href="/snote/assets/js/362.ae2e8c50.js"><link rel="prefetch" href="/snote/assets/js/363.f4fd2d93.js"><link rel="prefetch" href="/snote/assets/js/364.71efc99c.js"><link rel="prefetch" href="/snote/assets/js/365.01f1bbac.js"><link rel="prefetch" href="/snote/assets/js/366.ce846e06.js"><link rel="prefetch" href="/snote/assets/js/367.d4be3b41.js"><link rel="prefetch" href="/snote/assets/js/368.5dfde021.js"><link rel="prefetch" href="/snote/assets/js/369.4fc6a3c2.js"><link rel="prefetch" href="/snote/assets/js/37.9518c0e3.js"><link rel="prefetch" href="/snote/assets/js/370.0beee867.js"><link rel="prefetch" href="/snote/assets/js/371.93f76ea7.js"><link rel="prefetch" href="/snote/assets/js/372.3516675d.js"><link rel="prefetch" href="/snote/assets/js/373.77a2d6fe.js"><link rel="prefetch" href="/snote/assets/js/374.4df21af3.js"><link rel="prefetch" href="/snote/assets/js/375.2b0bfaf9.js"><link rel="prefetch" href="/snote/assets/js/376.1ede8405.js"><link rel="prefetch" href="/snote/assets/js/377.6ebc80ca.js"><link rel="prefetch" href="/snote/assets/js/378.10b8ed94.js"><link rel="prefetch" href="/snote/assets/js/379.bf89586c.js"><link rel="prefetch" href="/snote/assets/js/38.87f9adbc.js"><link rel="prefetch" href="/snote/assets/js/380.0858af5c.js"><link rel="prefetch" href="/snote/assets/js/381.f5f831bc.js"><link rel="prefetch" href="/snote/assets/js/382.6f2a95ff.js"><link rel="prefetch" href="/snote/assets/js/383.0f3a65fc.js"><link rel="prefetch" href="/snote/assets/js/384.a5c6d41a.js"><link rel="prefetch" href="/snote/assets/js/385.3a233d1e.js"><link rel="prefetch" href="/snote/assets/js/39.596a81f1.js"><link rel="prefetch" href="/snote/assets/js/4.19456bac.js"><link rel="prefetch" href="/snote/assets/js/40.0bebee27.js"><link rel="prefetch" href="/snote/assets/js/41.119caf45.js"><link rel="prefetch" href="/snote/assets/js/42.07dbe829.js"><link rel="prefetch" href="/snote/assets/js/43.534b6876.js"><link rel="prefetch" href="/snote/assets/js/44.109672d9.js"><link rel="prefetch" href="/snote/assets/js/45.3293f327.js"><link rel="prefetch" href="/snote/assets/js/46.71975505.js"><link rel="prefetch" href="/snote/assets/js/47.403a111f.js"><link rel="prefetch" href="/snote/assets/js/48.31adab5a.js"><link rel="prefetch" href="/snote/assets/js/49.d7cdd50e.js"><link rel="prefetch" href="/snote/assets/js/50.473b8594.js"><link rel="prefetch" href="/snote/assets/js/51.f397ad1e.js"><link rel="prefetch" href="/snote/assets/js/52.d5c73839.js"><link rel="prefetch" href="/snote/assets/js/53.7ff84687.js"><link rel="prefetch" href="/snote/assets/js/54.dfe7baf8.js"><link rel="prefetch" href="/snote/assets/js/55.45ce9dfe.js"><link rel="prefetch" href="/snote/assets/js/56.99f83db0.js"><link rel="prefetch" href="/snote/assets/js/57.041b34e7.js"><link rel="prefetch" href="/snote/assets/js/58.eb1dc55f.js"><link rel="prefetch" href="/snote/assets/js/59.07e58102.js"><link rel="prefetch" href="/snote/assets/js/6.f56a3b14.js"><link rel="prefetch" href="/snote/assets/js/60.401104f8.js"><link rel="prefetch" href="/snote/assets/js/61.1f344f74.js"><link rel="prefetch" href="/snote/assets/js/62.2458973b.js"><link rel="prefetch" href="/snote/assets/js/63.3935dddc.js"><link rel="prefetch" href="/snote/assets/js/64.7ba454e7.js"><link rel="prefetch" href="/snote/assets/js/65.78e00c42.js"><link rel="prefetch" href="/snote/assets/js/66.a5035491.js"><link rel="prefetch" href="/snote/assets/js/67.d4a88243.js"><link rel="prefetch" href="/snote/assets/js/68.e5ea69d1.js"><link rel="prefetch" href="/snote/assets/js/69.0d61549e.js"><link rel="prefetch" href="/snote/assets/js/7.fef180a0.js"><link rel="prefetch" href="/snote/assets/js/70.7ebe43d7.js"><link rel="prefetch" href="/snote/assets/js/71.e9b48c2a.js"><link rel="prefetch" href="/snote/assets/js/72.fea6f5d4.js"><link rel="prefetch" href="/snote/assets/js/73.2eb66693.js"><link rel="prefetch" href="/snote/assets/js/74.bb5a4f82.js"><link rel="prefetch" href="/snote/assets/js/75.f281d576.js"><link rel="prefetch" href="/snote/assets/js/76.8d8d7aee.js"><link rel="prefetch" href="/snote/assets/js/78.65f8cc94.js"><link rel="prefetch" href="/snote/assets/js/79.bcc870ee.js"><link rel="prefetch" href="/snote/assets/js/8.c4d1827a.js"><link rel="prefetch" href="/snote/assets/js/80.7f9e4555.js"><link rel="prefetch" href="/snote/assets/js/81.96ec0bed.js"><link rel="prefetch" href="/snote/assets/js/82.070dd41d.js"><link rel="prefetch" href="/snote/assets/js/83.ebe27694.js"><link rel="prefetch" href="/snote/assets/js/84.75491c26.js"><link rel="prefetch" href="/snote/assets/js/85.714e47e1.js"><link rel="prefetch" href="/snote/assets/js/86.9d78fc9e.js"><link rel="prefetch" href="/snote/assets/js/87.08bb0110.js"><link rel="prefetch" href="/snote/assets/js/88.c6532cef.js"><link rel="prefetch" href="/snote/assets/js/89.92eaf325.js"><link rel="prefetch" href="/snote/assets/js/9.05800a53.js"><link rel="prefetch" href="/snote/assets/js/90.77ebb53b.js"><link rel="prefetch" href="/snote/assets/js/91.6c2753e5.js"><link rel="prefetch" href="/snote/assets/js/92.8ffec3d5.js"><link rel="prefetch" href="/snote/assets/js/93.f2a2ebcd.js"><link rel="prefetch" href="/snote/assets/js/94.ce688d63.js"><link rel="prefetch" href="/snote/assets/js/95.6f20e8a9.js"><link rel="prefetch" href="/snote/assets/js/96.da6970c0.js"><link rel="prefetch" href="/snote/assets/js/97.0ee9c63a.js"><link rel="prefetch" href="/snote/assets/js/98.0cd42ce4.js"><link rel="prefetch" href="/snote/assets/js/99.748348db.js">
    <link rel="stylesheet" href="/snote/assets/css/0.styles.733b32e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>snote</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>study note</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/snote/" class="home-link router-link-active"><!----> <span class="site-name">snote</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/snote/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/snote/categories/maven/" class="nav-link"><i class="undefined"></i>
  maven
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/dev-tools/" class="nav-link"><i class="undefined"></i>
  dev-tools
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/idea/" class="nav-link"><i class="undefined"></i>
  idea
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/java-basic/" class="nav-link"><i class="undefined"></i>
  java-basic
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/java-concurrency/" class="nav-link"><i class="undefined"></i>
  java-concurrency
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/jvm/" class="nav-link"><i class="undefined"></i>
  jvm
</a></li></ul></div></div><div class="nav-item"><a href="/snote/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/snote/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><!----> <!----> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>138</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>6</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6><li class="social-item" data-v-828910c6><i class="iconfont reco-github" style="color:#f47e60;" data-v-828910c6></i></li></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/snote/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/snote/categories/maven/" class="nav-link"><i class="undefined"></i>
  maven
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/dev-tools/" class="nav-link"><i class="undefined"></i>
  dev-tools
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/idea/" class="nav-link"><i class="undefined"></i>
  idea
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/java-basic/" class="nav-link"><i class="undefined"></i>
  java-basic
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/java-concurrency/" class="nav-link"><i class="undefined"></i>
  java-concurrency
</a></li><li class="dropdown-item"><!----> <a href="/snote/categories/jvm/" class="nav-link"><i class="undefined"></i>
  jvm
</a></li></ul></div></div><div class="nav-item"><a href="/snote/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/snote/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mysql Basic</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_00_zi-yuan-tie.html" class="sidebar-link">一、官方资料</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_01_an-zhuang-ji-pei-zhi.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_01_an-zhuang-ji-pei-zhi.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_02_an-quan-guan-li.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_02_an-quan-guan-li.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_03_shu-ju-ku-yu-shu-ju-biao-de-ji-ben-cao-zuo.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_03_shu-ju-ku-yu-shu-ju-biao-de-ji-ben-cao-zuo.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_04_suo-yin-xu-lie.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_04_suo-yin-xu-lie.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_05_shu-ju-lei-xing.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_05_shu-ju-lei-xing.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_06_huo-qu-shu-ju-ku-yuan-shu-ju.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_06_huo-qu-shu-ju-ku-yuan-shu-ju.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_07_shu-ju-cha-xun.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_07_shu-ju-cha-xun.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_cong-binloghui-fu-shu-ju-ku-shu-ju.html" class="sidebar-link">从binlog恢复数据库数据</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html" aria-current="page" class="active sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_09_fu-zhi.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysql_09_fu-zhi.html</a></li><li><a href="/snote/cs/backend/db/mysql/mysql-basic/mysqlyi-chang_01_.html" class="sidebar-link">/cs/backend/db/mysql/mysql-basic/mysqlyi-chang_01_.html</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title"></h1> <div data-v-1ff7123e><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><p>[TOC]</p> <h1 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h1> <h1 id="一、数据备份的基本概念"><a href="#一、数据备份的基本概念" class="header-anchor">#</a> 一、数据备份的基本概念</h1> <p>只要发生数据传输、数据存储和数据交换，就有可能产生数据故障。</p> <blockquote><ul><li>通常，数据故障可划分为<strong>系统故障</strong>、<strong>事务故障</strong>和<strong>介质故障</strong>三大类。从信息安全的角度出发，实际上第三方或敌方的“信息攻击”，也会产生不同种类的数据故障。例如：计算机病毒型、特洛伊木马型、“黑客”入侵型、逻辑炸弹型等。</li> <li>这些故障将会造成的<strong>后果</strong>有：<strong>数据丢失</strong>、<strong>数据被修改</strong>、<strong>增加无用数据</strong>及<strong>系统瘫痪</strong>等。</li> <li>作为系统管理员，就是要千方百计地维护系统和数据的完整性与准确性。通常<strong>采取的措施</strong>有：<strong>安装防火墙</strong>，防止“黑客”入侵；<strong>安装防病毒软件</strong>，采取存取控制措施；<strong>选用高可靠性的软件产品</strong>；增强计算机网络的安全性。</li></ul> <p>但是，世界上没有万无一失的信息安全措施。信息世界“攻击和反攻击”也永无止境。对信息的攻击和防护好似矛与盾的关系，螺旋式地向前发展。</p> <p>在信息的收集、处理、存储、传输和分发中经常会存在一些新的问题，其中最值得我们关注的就是系统失效、数据丢失或遭到破坏。威胁数据的安全、造成系统失效的主要原因有以下几个方面：硬盘驱动器损坏、人为错误、“黑客”攻击、病毒、自然灾害、电源浪涌、磁干扰等。</p></blockquote> <p>因此，数据备份是保护数据的最后手段，也是防止主动型信息攻击的最后一道防线。</p> <h2 id="_1-数据备份的意义"><a href="#_1-数据备份的意义" class="header-anchor">#</a> 1.数据备份的意义</h2> <p>数据备份的任务与意义就在于，<strong>当灾难发生后，通过备份的数据完整、快速、简捷、可靠地恢复原有系统</strong>。</p> <h2 id="_2-备份时考虑因素"><a href="#_2-备份时考虑因素" class="header-anchor">#</a> 2.备份时考虑因素</h2> <p>备份时可考虑以下因素：</p> <blockquote><ul><li><strong>定期备份</strong>：数据库要定期做备份，备份的周期应当根据应用数据系统可承受的恢复时间，而且定期备份的时间应当在系统负载最低的时候进行。对于重要的数据，要保证在极端情况下的损失都可以正常恢复。</li> <li><strong>恢复测试</strong>：定期备份后，同样需要定期做恢复测试，了解备份的正确可靠性，确保备份是有意义的、可恢复的。</li> <li><strong>增量备份</strong>：根据系统需要来确定是否采用增量备份，增量备份只需要备份每天的增量数据，备份花费的时间少，对系统负载的压力也小。缺点就是恢复的时候需要加载之前所有的备份数据，恢复时间较长。</li> <li><code>log-bin</code>：确保MySQL打开了<code>log-bin</code>选项，MySQL在做完整恢复或者基于时间点恢复的时候都需要BINLOG。</li> <li><strong>异地备份</strong>：可以考虑异地备份。</li></ul></blockquote> <h2 id="_3-数据备份类型"><a href="#_3-数据备份类型" class="header-anchor">#</a> 3.数据备份类型</h2> <h3 id="_3-1-数据库服务器是否在线"><a href="#_3-1-数据库服务器是否在线" class="header-anchor">#</a> 3.1 数据库服务器是否在线</h3> <p>根据备份时，数据库服务器是否在线：</p> <ul><li>**冷备：cold backup。**服务器离线，数据库读写操作都不能执行。</li> <li>**温备：warm backup。**全局施加共享锁，所有业务只能读，不能写。</li> <li><strong>热备：hot backup。<strong>服务器不离线，读写操作都能进行。这就可能会有问题了。我们去备份，数据量很大，我们得夜间备份，在你复制的过程中，如果文件发生了改变，前一半后一半时间戳不一致，备份好的文件恢复过来是不允许访问的。在文件系统上，这样的文件属于时间点不一致文件，因此是不允许访问的。我们可以把整个数据库锁定，然后创建一快照，通过快照进行备份。通过快照备份，时间点一定是一致的，但是也有一些其他的问题。首先你要锁定整个库，你一锁定，别人就读写不了了。所以这也不能算是热备。真正的热备是指任何业务不终止，它能够自动在背后进行备份，而且自动保证时间点是一致的。</strong>【注意】:要想完成热备，通常是基于事务的存储引擎才能完成的。</strong></li></ul> <h3 id="_3-2-备份数据集"><a href="#_3-2-备份数据集" class="header-anchor">#</a> 3.2 备份数据集</h3> <p>根据备份的数据集：</p> <ul><li><strong>完全备份：full backup</strong></li> <li><strong>部分备份: partial backup</strong></li></ul> <h3 id="_3-3-备份接口"><a href="#_3-3-备份接口" class="header-anchor">#</a> 3.3 备份接口</h3> <p>根据备份时的接口（直接备份数据文件还是通过mysql服务器导出数据）：</p> <ul><li>**物理备份：**直接复制(归档)数据文件的备份方式；physical backup。<br>
copy命令就可以备份了，还可以tar归档压缩备份，因此不需要额外的工具就可以备份。恢复也很简单，把备份的文件复制到数据库里面就可以了，但是要兼容才行。但好在MySQL的InnoDB和MyISAM非常容易跨平台，一般来说，在windows上备份的在Linux上也能用，在Linux上备份的在windows上也能用。物理备份比较适合大数据量备份，比如超过10G，甚至几十个G，千万别用逻辑备份。</li> <li>**逻辑备份：**把数据从库中提出出来保存为文本文件；logical backup。<br>
从根本上来讲，逻辑备份备份后为文本文件，我们可以使用grep、sed、awk来处理查看，物理备份的文件则不能被如此处理。而且逻辑备份恢复简单，导入就可以了。逻辑备份也有缺点，比如说与物理备份恢复速度比，逻辑备份恢复更慢，占据空间更大。还有逻辑备份有个重要缺点，无法保证浮点数的精度，因为我们必须把二进制数据转换成文本格式。更重要的是使用逻辑备份还原数据以后还需要重建索引。 对于非常大的表，重建索引是相当消耗时间和资源的，由其是CPU资源。逻辑备份的工具：mysqldump</li></ul> <h3 id="_3-4-完全、增量、差异"><a href="#_3-4-完全、增量、差异" class="header-anchor">#</a> 3.4 完全、增量、差异</h3> <p>根据备份时是备份整个数据还是仅备份变化的数据：</p> <ul><li>**完全备份：**full backup</li> <li>**增量备份：**incremental backup。得使用专业的备份工具进行增量备份。</li> <li>**差异备份：**differential backup<br>
增量和差异：差异，每一次起始点不是上一次备份，而是上一次完全备份。见下图。将来设计备份策略的时候，需要根据你的数据量变化频度来设计。</li></ul> <p><a href="https://raw.githubusercontent.com/jkzhao/MarkdownPictures/master/MySQL/93.png" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/jkzhao/MarkdownPictures/master/MySQL/93.png" alt="img"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="四、各种备份与恢复方法实现"><a href="#四、各种备份与恢复方法实现" class="header-anchor">#</a> 四、各种备份与恢复方法实现</h1> <h2 id="_1-select-into-outfile"><a href="#_1-select-into-outfile" class="header-anchor">#</a> 1. <code>SELECT ... INTO OUTFILE</code></h2> <p>利用<code>SELECT ... INTO OUTFILE</code>实现数据的备份与还原。</p> <p>（1）备份数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token operator">&gt;</span> <span class="token keyword">use</span> hellodb<span class="token punctuation">;</span> <span class="token comment">--  打开 hellodb 库 </span>
mysql <span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> students<span class="token punctuation">;</span>  <span class="token comment">-- 查看 students 的属性</span>
mysql <span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> students <span class="token keyword">where</span> Age <span class="token operator">&gt;</span> <span class="token number">30</span> <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">'/tmp/user.txt'</span><span class="token punctuation">;</span>  <span class="token comment">-- 将年龄大于30的同学的信息备份出来</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（2）查看备份数据</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shell <span class="token operator">&gt;</span>  <span class="token builtin class-name">cd</span>  /tmp 
shell <span class="token operator">&gt;</span>  <span class="token function">cat</span> stud.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（3）数据被破坏</p> <blockquote><p>会发现是个文本文件。所以不能直接导入数据库了。需要使用LOADDATAINFILE恢复回到MySQL服务器端，删除年龄大于30的用户，模拟数据被破坏，</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token operator">&gt;</span> <span class="token keyword">delete</span> <span class="token keyword">from</span> students <span class="token keyword">where</span> Age <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（4）恢复数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token operator">&gt;</span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">infile</span> <span class="token string">'/tmp/stud.txt'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> students<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-mysqldump"><a href="#_2-mysqldump" class="header-anchor">#</a> 2. <code>mysqldump</code></h2> <p>利用mysqldump工具对数据进行备份和还原。</p> <p>mysqldump常用来做温备，所以首先需要对想备份的数据施加读锁。</p> <h3 id="_2-1-施加读锁的方式"><a href="#_2-1-施加读锁的方式" class="header-anchor">#</a> 2.1 施加读锁的方式</h3> <p>（1）直接在备份的时候添加选项</p> <blockquote><ul><li>lock-all-tables：是对要备份的数据库的所有表施加读锁。</li> <li>lock-table：仅对单张表施加读锁，即使是备份整个数据库，它也是在备份某张表的时候才对该表施加读锁，因此适用于备份单张表。</li></ul></blockquote> <p>（2）在服务器端书写命令</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token operator">&gt;</span> flush <span class="token keyword">tables</span> <span class="token keyword">with</span> <span class="token keyword">read</span> <span class="token keyword">lock</span><span class="token punctuation">;</span>  <span class="token comment">-- 施加锁，表示把位于内存上的表统统都同步到磁盘上去，然后施加读锁</span>
mysql <span class="token operator">&gt;</span> flush <span class="token keyword">tables</span> <span class="token keyword">with</span> <span class="token keyword">read</span> <span class="token keyword">lock</span><span class="token punctuation">;</span>  <span class="token comment">-- 释放读</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>但这对于InnoDB存储引擎来讲，虽然也能够请求到读锁，但是不代表它的所有数据都已经同步到磁盘上，</p> <p>因此当面对InnoDB的时候，要使用如下命令，看看InnoDB所有的数据都已经同步到磁盘上，才进行备份操作。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token operator">&gt;</span>  <span class="token keyword">show</span> <span class="token keyword">engine</span> <span class="token keyword">innodb</span> <span class="token keyword">status</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-2-备份过程"><a href="#_2-2-备份过程" class="header-anchor">#</a> 2.2 备份过程</h3> <p>采取的备份策略为：完全备份+增量备份+二进制日志</p> <p>（1）先给数据库做完全备份：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shell <span class="token operator">&gt;</span>  mysqldump -uroot --single-transaction --master-data <span class="token operator">=</span> <span class="token number">2</span> --databases hellodb <span class="token operator">&gt;</span> /backup/hellodb_<span class="token variable"><span class="token variable">`</span>date+%F<span class="token variable">`</span></span>.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><ul><li><code>--single-transaction</code>：基于此选项能实现热备InnoDB表，因此，不需要同时使用<code>--lock-all-tables</code>；</li> <li><code>--master-data=2</code>：记录备份那一时刻的二进制日志的位置，并且注释掉，1是不注释的；</li> <li><code>--databases hellodb</code>：指定备份的数据库。</li></ul></blockquote> <p>（2）回到MySQL服务器端更新数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> tb1<span class="token punctuation">(</span> id <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 创建表</span>
mysql <span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> tb1 <span class="token keyword">values</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">-- 插入数据，这里只做演示，随便插入了几个数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（3）先查看完全备份文件里边记录的位置</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shell <span class="token operator">&gt;</span> <span class="token function">cat</span> hellodb_2013-09-08.sql <span class="token operator">|</span> <span class="token function">less</span> 

--CHANGE MASTER TO MASTER_LOG_FILE <span class="token operator">=</span><span class="token string">' mysql-bin.000013'</span>, MASTER_LOG_POS <span class="token operator">=</span> <span class="token number">15684</span><span class="token punctuation">;</span>  -- 记录了二进制日志的位
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>显示此时的二进制日志的位置，从备份文件里边记录的位置到我们此时的位置，即为增量的部</p> <h1 id="三、备份与恢复"><a href="#三、备份与恢复" class="header-anchor">#</a> 三、备份与恢复</h1> <h2 id="_1-select-into-outfile-备份与恢复"><a href="#_1-select-into-outfile-备份与恢复" class="header-anchor">#</a> 1.<code>select... into outfile</code> 备份与恢复</h2> <p>通过Query将特定数据以指定方式输出到文本文件中，类似于Oracle中的SPOOL功能</p> <h3 id="_1-1-语法"><a href="#_1-1-语法" class="header-anchor">#</a> 1.1 语法</h3> <p>参数说明如下:</p> <blockquote><ul><li><code>FIELDS ESCAPED BY ['name']</code>：在SQL语句中需要转义的字符；</li> <li><code>FIELDS TERMINATED BY</code>：设定每两个字段之间的分隔符；</li> <li><code>FIELDS [OPTIONALLY] ENCLOSED BY 'name'</code> ：包装，有OPTIONALLY数字类型不被包装，否则全包装；</li> <li><code>LINES TERMINATED BY 'name'</code>：行分隔符，即每记录结束时添加的字符</li></ul></blockquote> <h3 id="_1-2-备份"><a href="#_1-2-备份" class="header-anchor">#</a> 1.2 备份</h3> <p>示例1：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span>  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">'/var/lib/mysql-files/user.txt'</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>示例2:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">'/ tmp/ tb1. txt'</span> 
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span> 
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">optionally</span> <span class="token keyword">enclosed</span> <span class="token keyword">by</span> <span class="token string">'&quot;'</span> 
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">lines</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\ n'</span> <span class="token comment">--默 认 </span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> tb1 <span class="token keyword">limit</span> <span class="token number">50</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">50</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span> 

<span class="token punctuation">[</span>root@ gc tmp<span class="token punctuation">]</span> more tb1<span class="token punctuation">.</span> txt 
<span class="token string">&quot;information_schema&quot;</span><span class="token punctuation">,</span><span class="token string">&quot; CHARACTER_SETS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot; SYSTEM VIEW&quot;</span> <span class="token string">&quot;information_schema&quot;</span><span class="token punctuation">,</span><span class="token string">&quot; COLLATIONS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot; SYSTEM VIEW&quot;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_1-3-恢复"><a href="#_1-3-恢复" class="header-anchor">#</a> 1.3 恢复</h3> <p><code>LOAD DATA INFILE</code>语句用于高速地从一个文本文件中读取行，并写入一个表中，文件名称必须为一个文字字符串。此命令是 <code>SELECT ... INTO OUTFILE</code> 反操作，</p> <p>示例1：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span>  <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">infile</span> <span class="token string">'/var/lib/mysql-files/user.txt'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>示例2：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>LOAD DATA LOCAL INFILE 'data.txt' INTO TABLE tbl_name 
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '&quot;' 
LINES TERMINATED BY '\n'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-mysqldump-备份与恢复"><a href="#_2-mysqldump-备份与恢复" class="header-anchor">#</a> 2.mysqldump 备份与恢复</h2> <blockquote><p><code>mysqldump</code> 是采用SQL级别的备份机制，它将数据表导成 SQL 脚本文件，在不同的 MySQL 版本之间升级时相对比较合适，可用于备份mysql数据库和数据表的 表结构以及内容，这也是最常用的备份方法。</p></blockquote> <h3 id="_2-1-语法"><a href="#_2-1-语法" class="header-anchor">#</a> 2.1 语法</h3> <p>执行 <code>mysqldump --help</code> 可查看其用法</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqldump <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token keyword">database</span> <span class="token punctuation">[</span><span class="token keyword">tables</span><span class="token punctuation">]</span>
mysqldump <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token comment">--databases [OPTIONS] DB1 [DB2 DB3...]</span>
mysqldump <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token comment">--all-databases [OPTIONS]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>[OPTIONS]</strong></p> <blockquote><ul><li><p><code>-A</code>, <code>--all-databases</code></p> <p>备份所有数据库</p></li> <li><p><code>-B</code>, <code>--database</code></p> <p>备份多个指定的数据库</p></li> <li><p><code>-F</code>,<code>--flush-logs</code></p> <p>开始备份前刷新binlog日志，可用于后面增量恢复</p></li> <li><p><code>--master-data[=#]</code></p> <p>增加 binlog日志文件名和对应的位置点（即CHANGE MASTER语句） --master-data=1 不注释可执行语句 --masterd-data=2 注释可执行语句</p></li> <li><p><code>-x</code>, <code>--lock-all-tables</code></p> <p>在开始导出之前，提交请求锁定所有数据库中的所有表，以保证数据的一致性。这是一个全局读锁，并且自动关闭 <code>--single-transaction</code> 和 <code>--lock-tables</code> 选项。</p></li> <li><p><code>-l</code>, <code>--lock-tables</code></p> <p>它和 <code>--lock-all-tables</code> 类似，不过是锁定当前导出的数据表，而不是一下子锁定全部库下的表。本选项只适用于 <code>MyISAM</code> 表，如果是 <code>Innodb</code> 表可以用 <code>--single-transaction</code> 选项。</p></li> <li><p><code>-d</code>, <code>--no-data</code></p> <p>只备份表结构，而不备份数据</p></li> <li><p><code>--single-transaction</code></p> <p>事务，适合innodb事务数据库备份</p></li> <li><p><code>--default-character-set=charset</code></p> <p>指定导出数据时采用何种字符集，如果数据表不是采用默认的 <code>latin1</code> 字符集的话，那么导出时必须指定该选项，否则再次导入数据后将产生乱码问题。</p></li> <li><p><code>--complete-insert</code>，<code>-c</code></p> <p>导出的数据采用包含字段名的完整 <code>INSERT</code> 方式，也就是把所有的值都写在一行。这么做能提高插入效率，但是可能会受到 <code>max_allowed_packet</code> 参数的影响而导致插入失败。因此，需要谨慎使用该参数，至少我不推荐。</p></li> <li><p><code>--extended-insert = true|false</code></p> <p>默认情况下，<code>mysqldump</code> 开启 <code>--complete-insert</code> 模式，因此不想用它的的话，就使用本选项，设定它的值为 <code>false</code> 即可。</p></li> <li><p><code>--disable-keys</code></p> <p>告诉 <code>mysqldump</code> 在 <code>INSERT</code> 语句的开头和结尾增加 <code>/*!40000 ALTER TABLE table DISABLE KEYS */;</code> 和 <code>/*!40000 ALTER TABLE table ENABLE KEYS */;</code> 语句，这能大大提高插入语句的速度，因为它是在插入完所有数据后才重建索引的。该选项只适合 <code>MyISAM</code> 表。</p></li> <li><p><code>--hex-blob</code></p> <p>使用十六进制格式导出二进制字符串字段。如果有二进制数据就必须使用本选项。影响到的字段类型有 <code>BINARY、VARBINARY、BLOB</code>。</p></li> <li><p><code>--opt</code></p> <p>这只是一个快捷选项，等同于同时添加 <code>--add-drop-tables --add-locking --create-option --disable-keys --extended-insert --lock-tables --quick --set-charset</code> 选项。本选项能让 <code>mysqldump</code> 很快的导出数据，并且导出的数据能很快导回。该选项默认开启，但可以用 <code>--skip-opt</code> 禁用。注意，如果运行 <code>mysqldump</code> 没有指定 <code>--quick</code> 或 <code>--opt</code> 选项，则会将整个结果集放在内存中。如果导出大数据库的话可能会出现问题。</p></li> <li><p><code>--quick，-q</code></p> <p>该选项在导出大表时很有用，它强制 <code>mysqldump</code> 从服务器查询取得记录直接输出而不是取得所有记录后将它们缓存到内存中。</p></li> <li><p><code>--routines，-R</code></p> <p>导出存储过程以及自定义函数。</p></li> <li><p><code>--triggers</code></p> <p>同时导出触发器。该选项默认启用，用 <code>--skip-triggers</code> 禁用它。</p></li></ul></blockquote> <h3 id="_2-2-备份"><a href="#_2-2-备份" class="header-anchor">#</a> 2.2 备份</h3> <p>备份的时候需要保证数据一致性:</p> <blockquote><ul><li>对于事务支持的存储引擎，如Innodb或者BDB等，可以通过控制将整个备份过程在同一个事务中，使用“--single-transaction”选项</li> <li>对于不支持事务的存储引擎，则可通过读锁来保证数据一致性。</li></ul></blockquote> <p>施加读锁有如下两种方式：</p> <p>（1）添加 <code>mysqldump</code> 参数</p> <blockquote><ul><li>-x，–lock-all-tables：请求锁定所有表之后再备份，对MyISAM、InnoDB、Aria做温备。</li> <li>–lock-tables：备份哪张表，就锁定哪张表。这种并不理想，不建议使用，使用上面的那个。</li> <li>–single-transaction: 能够对InnoDB存储引擎实现热备；</li></ul></blockquote> <p>例如：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqldump <span class="token operator">-</span>uray <span class="token operator">-</span>p<span class="token string">'Ray12345.'</span> <span class="token comment">--default-character-set=utf8 --opt --extended-insert=false  --triggers -R --hex-blob -x  db_name &gt; db_name.sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（2）手动锁表</p> <p><img src="/snote/assets/img/95.7eed613b.png" alt="img"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span>  flush <span class="token keyword">tables</span> <span class="token keyword">with</span> <span class="token keyword">read</span> <span class="token keyword">lock</span><span class="token punctuation">;</span>   <span class="token comment">-- 刷写所有表并施加读锁</span>
mysql<span class="token operator">&gt;</span>  flush logs<span class="token punctuation">;</span>  <span class="token comment">-- 加锁之后刷一下日志</span>
mysql<span class="token operator">&gt;</span>  <span class="token keyword">show</span> master <span class="token keyword">status</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span>  mysqldump <span class="token operator">-</span>uray <span class="token operator">-</span>p<span class="token string">'Ray12345.'</span> <span class="token comment">--default-character-set=utf8 --opt --extended-insert=false  --triggers -R --hex-blob -x  db_name &gt; db_name.sql    -- 然后用mysqldump备份就可以了</span>
mysql<span class="token operator">&gt;</span>  <span class="token keyword">unlock</span>  <span class="token keyword">tables</span><span class="token punctuation">;</span>   <span class="token comment">-- 释放锁</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>（1）备份 <code>MyISAM</code> 表</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqldump <span class="token operator">-</span>uray <span class="token operator">-</span>p<span class="token string">'Ray12345.'</span> <span class="token comment">--default-character-set=utf8 --opt --extended-insert=false  --triggers -R --hex-blob -x  db_name &gt; db_name.sql</span>

<span class="token comment">-- 即</span>
shell<span class="token operator">&gt;</span> mysqldump <span class="token operator">-</span>uray <span class="token operator">-</span>p<span class="token string">'Ray12345.'</span> 
	<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--default-character-set=utf8 --opt --extended-insert=false </span>
	<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--triggers -R --hex-blob -x db_name &gt; db_name.sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>（2）备份 <code>Innodb</code> 表</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqldump <span class="token operator">-</span>uray <span class="token operator">-</span>p<span class="token string">'Ray12345.'</span> <span class="token comment">--default-character-set=utf8 --opt --extended-insert=false  --triggers -R --hex-blob --single-transaction  db_name &gt; db_name.sql</span>

<span class="token comment">-- 即</span>
shell<span class="token operator">&gt;</span> mysqldump <span class="token operator">-</span>uray <span class="token operator">-</span>p<span class="token string">'Ray12345.'</span> 
	<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--default-character-set=utf8 --opt --extended-insert=false </span>
	<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--triggers -R --hex-blob  --single-transaction  db_name &gt; db_name.sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>另外，如果想要实现在线备份，还可以使用 <code>--master-data</code> 参数来实现，如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqldump <span class="token operator">-</span>uray <span class="token operator">-</span>p<span class="token string">'Ray12345.'</span>  <span class="token comment">--default-character-set=utf8 --opt --master-data=1  --single-transaction --flush-logs db_name &gt; db_name.sql</span>

<span class="token comment">-- 即</span>
shell<span class="token operator">&gt;</span> mysqldump <span class="token operator">-</span>uray <span class="token operator">-</span>p<span class="token string">'Ray12345.'</span> 
	<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--default-character-set=utf8 --opt --master-data=1 </span>
	<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--single-transaction --flush-logs db_name &gt; db_name.sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>它只是在一开始的瞬间请求锁表，然后就刷新binlog了，而后在导出的文件中加入<code>CHANGE MASTER</code> 语句来指定当前备份的binlog位置，如果要把这个文件恢复到slave里去，就可以采用这种方法来做。</p> <blockquote><p>注意：--extended-insert 需要根据实际情况决定是否启用或关闭 ，会对数据恢复速度产生较大影响。</p></blockquote> <h3 id="_2-3-恢复"><a href="#_2-3-恢复" class="header-anchor">#</a> 2.3 恢复</h3> <p>用 <code>mysqldump</code> 备份出来的文件是一个可以直接倒入的 SQL 脚本，有两种方法可以将数据导入：</p> <p>（1）直接用 <code>mysql</code> 客户端</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>mysql -uray -p<span class="token string">'Ray12345.'</span> db_name  <span class="token operator">&lt;</span>  db_name.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（2）用 SOURCE 语法</p> <p>其实这不是标准的 SQL 语法，而是 <code>mysql</code> 客户端提供的功能，例如：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span>  source <span class="token operator">/</span>tmp<span class="token operator">/</span>db_name<span class="token punctuation">.</span><span class="token keyword">sql</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里需要指定文件的绝对路径，并且必须是 <code>mysqld</code> 运行用户(例如 nobody)有权限读取的文件。</p> <h3 id="_2-4-备份语句示例"><a href="#_2-4-备份语句示例" class="header-anchor">#</a> 2.4 备份语句示例</h3> <p><strong>示例</strong>：</p> <p>（1）<strong>备份所有数据库</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shell<span class="token operator">&gt;</span>  mysqldump -uroot -p --all-database <span class="token operator">&gt;</span> /tmp/ dumpback/ alldb.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（2）<strong>备份指定数据库</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@ gc ～<span class="token punctuation">]</span>  mysqldump -uroot -p --database sqoop hive <span class="token operator">&gt;</span> /tmp/dumpback/sqoop_hive.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（3）<strong>备份某数据库中的表</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@ gc ～<span class="token punctuation">]</span>  mysqldump -uroot -p sqoop tb1 <span class="token operator">&gt;</span> /tmp/ dumpback/ sqoop_tb1. sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（4）<strong>查看备份内容</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@ gc dumpback<span class="token punctuation">]</span>  <span class="token function">more</span>  sqoop_tb1.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="四、备份与恢复实战演示"><a href="#四、备份与恢复实战演示" class="header-anchor">#</a> 四、备份与恢复实战演示</h1> <h2 id="准备数据库以及数据表"><a href="#准备数据库以及数据表" class="header-anchor">#</a> 准备数据库以及数据表</h2> <ul><li><strong>studymysql.sql</strong></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> studymysql<span class="token punctuation">;</span>
<span class="token keyword">use</span> studymysql<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>
	id <span class="token keyword">bigint</span> <span class="token punctuation">(</span> <span class="token number">12</span> <span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	user_name <span class="token keyword">varchar</span> <span class="token punctuation">(</span> <span class="token number">45</span> <span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	password <span class="token keyword">varchar</span> <span class="token punctuation">(</span> <span class="token number">45</span> <span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    sex <span class="token keyword">varchar</span> <span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	age <span class="token keyword">int</span> <span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">default</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	city <span class="token keyword">varchar</span> <span class="token punctuation">(</span> <span class="token number">45</span> <span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	start_date <span class="token keyword">date</span> <span class="token keyword">default</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	end_date <span class="token keyword">date</span> <span class="token keyword">default</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	description <span class="token keyword">varchar</span> <span class="token punctuation">(</span> <span class="token number">200</span> <span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span> id <span class="token punctuation">)</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'tom'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">'shanghai'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'jack'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token string">'shanghai'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'mike'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token string">'shanghai'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'caly'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token string">'shanghai'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'carter'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">41</span><span class="token punctuation">,</span><span class="token string">'wuhan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'bush'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token string">'wuhan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'jerry'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">,</span><span class="token string">'wuhan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'xiaohong'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">41</span><span class="token punctuation">,</span><span class="token string">'wuhan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> password<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>city<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'xiaoming'</span> <span class="token punctuation">,</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">41</span><span class="token punctuation">,</span><span class="token string">'beijing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>登录shell，创建 studymysql.sql</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>ray@localhost mysql<span class="token punctuation">]</span>$ <span class="token builtin class-name">pwd</span>
/home/ray/dev/mysql
<span class="token punctuation">[</span>ray@localhost mysql<span class="token punctuation">]</span>$ <span class="token function">vim</span> studymysql.sql

<span class="token comment"># 将上述文件粘贴，并保存</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>登录mysql</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shell <span class="token operator">&gt;</span> mysql -uroot -p
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看数据库列表</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| example            |
| mysql              |
| performance_schema |
+--------------------+
4 rows in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>准备 <code>studymysql</code> 数据库： 使用 source 命令运行sql</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> source <span class="token operator">/</span>home<span class="token operator">/</span>ray<span class="token operator">/</span>dev<span class="token operator">/</span>mysql<span class="token operator">/</span>studymysql<span class="token punctuation">.</span><span class="token keyword">sql</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token keyword">Database</span> changed
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.08</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment">-- 查看数据库列表，发现已经有 studymysql 数据库了</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> <span class="token keyword">Database</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">|</span> example            <span class="token operator">|</span>
<span class="token operator">|</span> mysql              <span class="token operator">|</span>
<span class="token operator">|</span> performance_schema <span class="token operator">|</span>
<span class="token operator">|</span> studymysql         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">use</span> studymysql  			<span class="token comment">-- 切换数据库</span>
<span class="token keyword">Database</span> changed

mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>    		 	<span class="token comment">-- 查看数据表列表</span>
<span class="token operator">+</span><span class="token comment">----------------------+</span>
<span class="token operator">|</span> Tables_in_studymysql <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+</span>
<span class="token operator">|</span> <span class="token keyword">user</span>                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span>  	 <span class="token comment">-- 查看user 表</span>
<span class="token operator">+</span><span class="token comment">----+-----------+----------+-----+------+----------+------------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> user_name <span class="token operator">|</span> password <span class="token operator">|</span> sex <span class="token operator">|</span> age  <span class="token operator">|</span> city     <span class="token operator">|</span> start_date <span class="token operator">|</span> end_date <span class="token operator">|</span> description <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+----------+-----+------+----------+------------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> tom       <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 男  <span class="token operator">|</span>   <span class="token number">11</span> <span class="token operator">|</span> shanghai <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> jack      <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 男  <span class="token operator">|</span>   <span class="token number">21</span> <span class="token operator">|</span> shanghai <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> mike      <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 男  <span class="token operator">|</span>   <span class="token number">31</span> <span class="token operator">|</span> shanghai <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> caly      <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 女  <span class="token operator">|</span>   <span class="token number">31</span> <span class="token operator">|</span> shanghai <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> carter    <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 男  <span class="token operator">|</span>   <span class="token number">41</span> <span class="token operator">|</span> wuhan    <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> bush      <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 男  <span class="token operator">|</span>   <span class="token number">51</span> <span class="token operator">|</span> wuhan    <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> jerry     <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 男  <span class="token operator">|</span>   <span class="token number">61</span> <span class="token operator">|</span> wuhan    <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> xiaohong  <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 女  <span class="token operator">|</span>   <span class="token number">41</span> <span class="token operator">|</span> wuhan    <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> xiaoming  <span class="token operator">|</span> <span class="token number">123</span>      <span class="token operator">|</span> 男  <span class="token operator">|</span>   <span class="token number">41</span> <span class="token operator">|</span> beijing  <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+----------+-----+------+----------+------------+----------+-------------+</span>
<span class="token number">9</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h2 id="_1-select-into-outfile-备份与恢复-2"><a href="#_1-select-into-outfile-备份与恢复-2" class="header-anchor">#</a> 1. <code>SELECT ... INTO OUTFILE</code> 备份与恢复</h2> <h3 id="_1-1-备份数据"><a href="#_1-1-备份数据" class="header-anchor">#</a> 1.1 备份数据</h3> <p>查看默认备份目录：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span>  <span class="token keyword">SELECT</span> @<span class="token variable">@GLOBAL.secure_file_priv</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------------+</span>
<span class="token operator">|</span> @<span class="token variable">@GLOBAL.secure_file_priv</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------------+</span>
<span class="token operator">|</span> <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">-</span>files<span class="token operator">/</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>备份数据到备份目录中：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span>  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">'/var/lib/mysql-files/user.txt'</span><span class="token punctuation">;</span> 

<span class="token comment">-- 将备份文件拷贝到/tmp下，并查看</span>
shell<span class="token operator">&gt;</span>  cp <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">-</span>files<span class="token operator">/</span><span class="token keyword">user</span><span class="token punctuation">.</span>txt   <span class="token operator">/</span>tmp<span class="token operator">/</span><span class="token keyword">user</span><span class="token punctuation">.</span>txt
shell<span class="token operator">&gt;</span>  cat  <span class="token operator">/</span>tmp<span class="token operator">/</span><span class="token keyword">user</span><span class="token punctuation">.</span>txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_1-2-数据毁坏"><a href="#_1-2-数据毁坏" class="header-anchor">#</a> 1.2 数据毁坏</h3> <p>将数据删掉，来默认真实环境中数据的毁坏</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-3-恢复数据"><a href="#_1-3-恢复数据" class="header-anchor">#</a> 1.3 恢复数据</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">infile</span> <span class="token string">'/var/lib/mysql-files/user.txt'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-mysqldump-备份与恢复-2"><a href="#_2-mysqldump-备份与恢复-2" class="header-anchor">#</a> 2. mysqldump 备份与恢复</h2> <p>这里我们采用的备份策略为：完全备份+增量备份+二进制日志</p> <h3 id="_2-1-完全备份"><a href="#_2-1-完全备份" class="header-anchor">#</a> 2.1 完全备份</h3> <p>（1）先给数据库做完全备份：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shell <span class="token operator">&gt;</span>  mysqldump -uray -p<span class="token string">'Ray12345.'</span> --single-transaction --master-data<span class="token operator">=</span><span class="token number">2</span> --databases studymysql <span class="token operator">&gt;</span> /tmp/backup/studymysql_<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%Y-%m-%d-%H<span class="token variable">`</span></span>.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><ul><li><code>--single-transaction</code>：基于此选项能实现热备InnoDB表，因此，不需要同时使用<code>--lock-all-tables</code>；</li> <li><code>--master-data=2</code>：记录备份那一时刻的二进制日志的位置，并且注释掉，1是不注释的；</li> <li><code>--databases hellodb</code>：指定备份的数据库。</li></ul></blockquote> <p>（2）查看此时的二进制日志的位置</p> <p>完全备份文件里边记录了二进制日志的位置，查看一下</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>shell <span class="token operator">&gt;</span> cat studymysql_2019<span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">28</span><span class="token operator">-</span><span class="token number">12.</span><span class="token keyword">sql</span> <span class="token operator">|</span> less 


<span class="token comment">--</span>
<span class="token comment">-- Position to start replication or point-in-time recovery from</span>
<span class="token comment">--</span>
<span class="token comment">-- 记录了二进制日志的位置</span>
<span class="token comment">-- CHANGE MASTER TO MASTER_LOG_FILE='binlog.000002', MASTER_LOG_POS=5941;</span>

<span class="token comment">--</span>
<span class="token comment">-- Current Database: `studymysql`</span>
<span class="token comment">--</span>

<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token comment">/*!32312 IF NOT EXISTS*/</span> <span class="token punctuation">`</span>studymysql<span class="token punctuation">`</span> <span class="token comment">/*!40100 DEFAULT CHARACTER SET utf8 */</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2-2-增量备份"><a href="#_2-2-增量备份" class="header-anchor">#</a> 2.2 增量备份</h3> <p>在上一次完全备份之后，我们的数据有发生了变化</p> <h4 id="_2-2-1-数据变更"><a href="#_2-2-1-数据变更" class="header-anchor">#</a> 2.2.1  数据变更</h4> <p>（1）回到MySQL服务器端更新数据</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> mysql &gt; create table tb1( id int);  -- 创建表
 mysql &gt; insert into tb1 values( 1),( 2),( 3);   -- 插入数据，这里只做演示，随便插入了几个数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（2）查看此时的二进制日志的位置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> -- 显示此时的二进制日志的位置，从备份文件里边记录的位置到我们此时的位置，即为增量的部分
 
 mysql&gt; show master status;
 
 +---------------+----------+--------------+------------------+-------------------+
 | File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
 +---------------+----------+--------------+------------------+-------------------+
 | binlog.000002 |     6439 |              |                  |                   |
 +---------------+----------+--------------+------------------+-------------------+
 1 row in set (0.00 sec)
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2-2-2-增量备份"><a href="#_2-2-2-增量备份" class="header-anchor">#</a> 2.2.2 增量备份</h4> <p>我们对上一次完全备份到目前为止，有所变更的数据做一次增量备份</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shell<span class="token operator">&gt;</span>  mysqlbinlog --start-position<span class="token operator">=</span><span class="token number">5941</span> --stop-position<span class="token operator">=</span><span class="token number">6439</span>  /var/lib/mysql/binlog.000002 <span class="token operator">&gt;</span> /tmp/backup/studymysql_<span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%Y-%m-%d-%H<span class="token variable">`</span></span>.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-3-数据毁坏"><a href="#_2-3-数据毁坏" class="header-anchor">#</a> 2.3 数据毁坏</h3> <p>自上一次增量备份到目前为止，我们的数据有一些变化</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tb1 <span class="token keyword">values</span><span class="token punctuation">(</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 模拟变化的数据</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然而，我们对这些变化的数据还未来得及备份，数据就毁坏了</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> studymysql<span class="token punctuation">;</span>    <span class="token comment">-- 删库，模拟数据毁坏</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-4-导出日志"><a href="#_2-4-导出日志" class="header-anchor">#</a> 2.4 导出日志</h3> <p>查看删库时，二进制日志的位置</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>shell<span class="token operator">&gt;</span>   mysqlbinlog <span class="token comment">--start-position=6439  /var/lib/mysql/binlog.000002</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后导出二进制日志</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>shell<span class="token operator">&gt;</span>  mysqlbinlog <span class="token comment">--start-position=5941 --stop-position=6439  /var/lib/mysql/binlog.000002 &gt; /tmp/backup/studymysql.sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-5-恢复数据"><a href="#_2-5-恢复数据" class="header-anchor">#</a> 2.5 恢复数据</h3> <p>先让mysql 离线</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">set</span> sql_log_bin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">-- 关闭二进制日志</span>
mysql <span class="token operator">&gt;</span> flush logs<span class="token punctuation">;</span>   <span class="token comment">-- 刷写日志</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>恢复数据：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shell<span class="token operator">&gt;</span>  mysql  <span class="token operator">&lt;</span>  /tmp/backup/studymysql_2019-02-28-12.sql  <span class="token comment"># 导入完全备份文件</span>
shell<span class="token operator">&gt;</span>  mysql  <span class="token operator">&lt;</span>  /tmp/backup/studymysql_2019-02-28-13.sql  <span class="token comment"># 导入增量备份文件</span>
shell<span class="token operator">&gt;</span>  mysql  <span class="token operator">&lt;</span>  /tmp/backup/studymysql.sql  <span class="token comment"># 导入二进制日志文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2021-06-11 22:12:01</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_cong-binloghui-fu-shu-ju-ku-shu-ju.html" class="prev">
            从binlog恢复数据库数据
          </a></span> <span class="next"><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_09_fu-zhi.html">
            /cs/backend/db/mysql/mysql-basic/mysql_09_fu-zhi.html
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-数据备份的意义" class="sidebar-link reco-side-_1-数据备份的意义" data-v-70334359>1.数据备份的意义</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-备份时考虑因素" class="sidebar-link reco-side-_2-备份时考虑因素" data-v-70334359>2.备份时考虑因素</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_3-数据备份类型" class="sidebar-link reco-side-_3-数据备份类型" data-v-70334359>3.数据备份类型</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_3-1-数据库服务器是否在线" class="sidebar-link reco-side-_3-1-数据库服务器是否在线" data-v-70334359>3.1 数据库服务器是否在线</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_3-2-备份数据集" class="sidebar-link reco-side-_3-2-备份数据集" data-v-70334359>3.2 备份数据集</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_3-3-备份接口" class="sidebar-link reco-side-_3-3-备份接口" data-v-70334359>3.3 备份接口</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_3-4-完全、增量、差异" class="sidebar-link reco-side-_3-4-完全、增量、差异" data-v-70334359>3.4 完全、增量、差异</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-select-into-outfile" class="sidebar-link reco-side-_1-select-into-outfile" data-v-70334359>1. SELECT ... INTO OUTFILE</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-mysqldump" class="sidebar-link reco-side-_2-mysqldump" data-v-70334359>2. mysqldump</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-1-施加读锁的方式" class="sidebar-link reco-side-_2-1-施加读锁的方式" data-v-70334359>2.1 施加读锁的方式</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-2-备份过程" class="sidebar-link reco-side-_2-2-备份过程" data-v-70334359>2.2 备份过程</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-select-into-outfile-备份与恢复" class="sidebar-link reco-side-_1-select-into-outfile-备份与恢复" data-v-70334359>1.select... into outfile 备份与恢复</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-1-语法" class="sidebar-link reco-side-_1-1-语法" data-v-70334359>1.1 语法</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-2-备份" class="sidebar-link reco-side-_1-2-备份" data-v-70334359>1.2 备份</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-3-恢复" class="sidebar-link reco-side-_1-3-恢复" data-v-70334359>1.3 恢复</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-mysqldump-备份与恢复" class="sidebar-link reco-side-_2-mysqldump-备份与恢复" data-v-70334359>2.mysqldump 备份与恢复</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-1-语法" class="sidebar-link reco-side-_2-1-语法" data-v-70334359>2.1 语法</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-2-备份" class="sidebar-link reco-side-_2-2-备份" data-v-70334359>2.2 备份</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-3-恢复" class="sidebar-link reco-side-_2-3-恢复" data-v-70334359>2.3 恢复</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-4-备份语句示例" class="sidebar-link reco-side-_2-4-备份语句示例" data-v-70334359>2.4 备份语句示例</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#准备数据库以及数据表" class="sidebar-link reco-side-准备数据库以及数据表" data-v-70334359>准备数据库以及数据表</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-select-into-outfile-备份与恢复-2" class="sidebar-link reco-side-_1-select-into-outfile-备份与恢复-2" data-v-70334359>1. SELECT ... INTO OUTFILE 备份与恢复</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-1-备份数据" class="sidebar-link reco-side-_1-1-备份数据" data-v-70334359>1.1 备份数据</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-2-数据毁坏" class="sidebar-link reco-side-_1-2-数据毁坏" data-v-70334359>1.2 数据毁坏</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_1-3-恢复数据" class="sidebar-link reco-side-_1-3-恢复数据" data-v-70334359>1.3 恢复数据</a></li><li class="level-2" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-mysqldump-备份与恢复-2" class="sidebar-link reco-side-_2-mysqldump-备份与恢复-2" data-v-70334359>2. mysqldump 备份与恢复</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-1-完全备份" class="sidebar-link reco-side-_2-1-完全备份" data-v-70334359>2.1 完全备份</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-2-增量备份" class="sidebar-link reco-side-_2-2-增量备份" data-v-70334359>2.2 增量备份</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-3-数据毁坏" class="sidebar-link reco-side-_2-3-数据毁坏" data-v-70334359>2.3 数据毁坏</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-4-导出日志" class="sidebar-link reco-side-_2-4-导出日志" data-v-70334359>2.4 导出日志</a></li><li class="level-3" data-v-70334359><a href="/snote/cs/backend/db/mysql/mysql-basic/mysql_08_shu-ju-ku-de-bei-fen-yu-hui-fu.html#_2-5-恢复数据" class="sidebar-link reco-side-_2-5-恢复数据" data-v-70334359>2.5 恢复数据</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 snote
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:50px;bottom:10px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><canvas id="vuepress-canvas-cursor"></canvas><!----></div></div>
    <script src="/snote/assets/js/app.3cc04e36.js" defer></script><script src="/snote/assets/js/5.22329d81.js" defer></script><script src="/snote/assets/js/1.5e23c49c.js" defer></script><script src="/snote/assets/js/126.10649710.js" defer></script><script src="/snote/assets/js/77.11cc1a2c.js" defer></script>
  </body>
</html>
