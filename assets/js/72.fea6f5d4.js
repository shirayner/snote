(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{1410:function(s,e,a){"use strict";a.r(e);var t=a(4),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("[TOC]")]),s._v(" "),t("h1",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("h1",{attrs:{id:"一、deepin下安装-docker-ce"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、deepin下安装-docker-ce"}},[s._v("#")]),s._v(" 一、Deepin下安装 Docker CE")]),s._v(" "),t("blockquote",[t("p",[s._v("参考：")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/debian/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Get Docker Engine - Community for Debian"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.jianshu.com/p/4c1aba15f7fe",target:"_blank",rel:"noopener noreferrer"}},[s._v("Deepin15.10安装Docker"),t("OutboundLink")],1)])])]),s._v(" "),t("h2",{attrs:{id:"_1-卸载旧版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载旧版本"}},[s._v("#")]),s._v(" 1.卸载旧版本")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" remove docker docker-engine docker.io containerd runc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_2-更新软件源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-更新软件源"}},[s._v("#")]),s._v(" 2.更新软件源")]),s._v(" "),t("p",[s._v("（1）安装docker-ce与密钥管理及相关下载工具")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" apt-transport-https ca-certificates "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" gnupg2 software-properties-common\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("注意：主要包括curl命令、add-apt-reposiory工具（利用software-properties-common提供该工具）和密钥管理工具。")])]),s._v(" "),t("p",[s._v("（2）添加CPG密钥")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/debian/gpg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用上述命令，出现如下异常：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("curl: (35) error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol\ngpg: no valid OpenPGP data found.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("可将命令拆成两步执行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://mirrors.ustc.edu.cn/docker-ce/linux/debian/gpg\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" gpg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("查看密钥是否安装成功")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo apt-key fingerprint 0EBFCD88\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果安装成功，显示如下信息：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pub   rsa4096 2017-02-22 [SCEA]\n      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88\nuid   [ 未知 ] Docker Release (CE deb) <docker@docker.com>\nsub   rsa4096 2017-02-22 [S]\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("（3）添加 docker 软件源")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 typora 软件源文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/apt/sources.list.d/docker.list\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件内键入以下内容，保存退出即可")]),s._v("\ndeb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" https://mirrors.ustc.edu.cn/docker-ce/linux/debian stretch stable\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("其中：stretch为Debian版本号，这个和Ubuntu系统利用 $(lsb_release -cs)命令设置系统版本号不同，需要手动指定Debian版本号。")]),s._v(" "),t("p",[s._v("查看Deepin系统中Debian版本号可以用查看：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cat /etc/debian_version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("根据查看的版本号替换对应的版本名称即可：")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('9（"stretch"） — 当前的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('8（"jessie"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('7（"wheezy"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('6.0（"squeeze"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('GNU/Linux 5.0（"lenny"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('GNU/Linux 4.0（"etch"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('GNU/Linux 3.1（"sarge"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('GNU/Linux 3.0（"woody"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('GNU/Linux 2.2（"potato"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('GNU/Linux 2.1（"slink"） — 被淘汰的稳定版')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Debian")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('GNU/Linux 2.0（"hamm"） — 被淘汰的稳定版')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("Deepin15.11 对应的Debian版本号为9，版本代号为stretch，进行相应的替换即可。")]),s._v(" "),t("p",[s._v("（4）更新缓存")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_3-安装docker-ce"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装docker-ce"}},[s._v("#")]),s._v(" 3.安装docker-ce")]),s._v(" "),t("p",[s._v("（1）安装docker-ce")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（2）修改 docker.service")]),s._v(" "),t("p",[s._v("安装完成后，需要修改相应的文件：/lib/systemd/system/docker.service."),t("br"),s._v("\n把如下位置内容：")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/usr/bin/dockerd -H fd:// ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("修改为：")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/usr/bin/dockerd ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（3）启动docker：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl start docker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_4-验证是否安装成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-验证是否安装成功"}},[s._v("#")]),s._v(" 4.验证是否安装成功")]),s._v(" "),t("p",[s._v("（1）首先启动 docker 服务")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl start docker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（2）查看 Docker 版本信息")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（3）然后，我们就通过运行 "),t("code",[s._v("hello-world")]),s._v("来验证是否安装成功")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run hello-world\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_5-更新docker用户组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-更新docker用户组"}},[s._v("#")]),s._v(" 5.更新Docker用户组")]),s._v(" "),t("p",[s._v("当执行docker相关命令，如"),t("code",[s._v("docker version")]),s._v("时，可以看到存在权限不足的问题，是因为docker只允许root用户执行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ray@ray:~$ docker version\nClient: Docker Engine - Community\n Version:           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.03")]),s._v(".2\n API version:       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.40")]),s._v("\n Go version:        go1.12.8\n Git commit:        6a30dfca03\n Built:             Thu Aug "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 05:29:49 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\n OS/Arch:           linux/amd64\n Experimental:      "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nGot permission denied "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.40/version: dial unix /var/run/docker.sock: connect: permission denied\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("为解决此问题，可将当前用户添加到Docker用户组，然后注销用户重新登录即可。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" -aG docker "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"二、wsl上使用docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、wsl上使用docker"}},[s._v("#")]),s._v(" 二、WSL上使用docker")]),s._v(" "),t("p",[s._v("windows 用户建议先安装 WSL （适用于Windowd的Linux子系统），安装教程参考："),t("RouterLink",{attrs:{to:"/cs/ci-cd/dev-tools/02-命令行工具.html"}},[s._v("02-命令行工具.md")])],1),s._v(" "),t("p",[t("strong",[s._v("不过令人遗憾的是目前WSL是不支持Docker的守护进程")]),s._v("，但您可以使用"),t("a",{attrs:{href:"https://nickjanetakis.com/blog/get-to-know-dockers-ecosystem#docker-cli",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker CLI"),t("OutboundLink")],1),s._v("连接到通过"),t("a",{attrs:{href:"https://nickjanetakis.com/blog/should-you-use-the-docker-toolbox-or-docker-for-mac-windows",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker for Windows"),t("OutboundLink")],1),s._v("或您创建的任何其他VM 运行的远程Docker守护进程")]),s._v(" "),t("h2",{attrs:{id:"_1-安装wsl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装wsl"}},[s._v("#")]),s._v(" 1.安装WSL")]),s._v(" "),t("p",[s._v("参考 "),t("RouterLink",{attrs:{to:"/cs/ci-cd/dev-tools/02-命令行工具.html"}},[s._v("02-命令行工具.md")])],1),s._v(" "),t("h2",{attrs:{id:"_2-安装docker-desktop-for-windows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装docker-desktop-for-windows"}},[s._v("#")]),s._v(" 2.安装Docker Desktop for Windows")]),s._v(" "),t("p",[s._v("（1）去官网下载 "),t("a",{attrs:{href:"https://hub.docker.com/editions/community/docker-ce-desktop-windows",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker Desktop for Windows"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("（2）然后在控制面板-> 程序和功能 -> 启用或关闭Window功能 -> 勾选 Hyper-V")]),s._v(" "),t("p",[t("img",{attrs:{src:a(963),alt:"1559544571527"}})]),s._v(" "),t("p",[s._v("（3）然后一路默认安装即可")]),s._v(" "),t("p",[s._v("（4）暴露守护进程端口，以便让 docker 客户端进行连接Docker守护进程")]),s._v(" "),t("p",[t("img",{attrs:{src:a(964),alt:"1559544665373"}})]),s._v(" "),t("h2",{attrs:{id:"_3-wsl连接dokcer守护进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-wsl连接dokcer守护进程"}},[s._v("#")]),s._v(" 3.WSL连接Dokcer守护进程")]),s._v(" "),t("blockquote",[t("p",[s._v("关于Linux环境变量持久化，请参见"),t("RouterLink",{attrs:{to:"/cs/ci-cd/Linux/Linux_01_基础知识/Linux_04_环境变量.html"}},[s._v("Linux_04_环境变量")])],1)]),s._v(" "),t("h3",{attrs:{id:"_3-1-配置-docker-host-环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-配置-docker-host-环境变量"}},[s._v("#")]),s._v(" 3.1 配置 DOCKER_HOST 环境变量")]),s._v(" "),t("p",[s._v("我们配置一个 DOCKER_HOST 环境变量，指定下Docker守护进程的地址")]),s._v(" "),t("p",[s._v("编辑 "),t("code",[s._v("~/.bashrc")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim ~/.bashrc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("追加下面内容")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# config for the docker client to connect docker daemon\nexport DOCKER_HOST=tcp://127.0.0.1:2375\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_3-2-安装-docker-客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-安装-docker-客户端"}},[s._v("#")]),s._v(" 3.2 安装 docker 客户端")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("apt install docker.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_4-验证wsl是否能成功运行docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-验证wsl是否能成功运行docker"}},[s._v("#")]),s._v(" 4.验证WSL是否能成功运行Docker")]),s._v(" "),t("p",[s._v("我们就通过运行 "),t("code",[s._v("hello-world")]),s._v("来验证是否安装成功")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" sudo docker run hello-world\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("发现已经可以运行Docker了")]),s._v(" "),t("p",[t("img",{attrs:{src:a(965),alt:"1559545652492"}})]),s._v(" "),t("h1",{attrs:{id:"三、配置docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、配置docker"}},[s._v("#")]),s._v(" 三、配置docker")]),s._v(" "),t("p",[s._v("为了避免每次使用docker命令都要用特权身份，可以将当前用户加入安装中自动创建的docker用户组：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo usermod -aG docker USER_NAME\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo usermod -aG docker ray\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"四、安装docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、安装docker-compose"}},[s._v("#")]),s._v(" 四、安装Docker-Compose")]),s._v(" "),t("blockquote",[t("p",[s._v("参考：")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.docker.com/compose/install/#install-compose",target:"_blank",rel:"noopener noreferrer"}},[s._v("Install Docker Compose"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/jxlsblog/p/10444726.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux 下 docker-compose安装"),t("OutboundLink")],1)])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/docker/compose/releases/download/1.24.1/docker-compose-'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" -o /usr/local/bin/docker-compose\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n\ndocker-compose --version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h1",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Get Docker CE for Ubuntu"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/xiaoliangge/p/9134585.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("在Linux的Windows子系统上(WSL)使用Docker（Ubuntu）"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://item.jd.com/12453318.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker 技术入门与实战"),t("OutboundLink")],1)]),s._v(" "),t("li")])])}),[],!1,null,null,null);e.default=r.exports},963:function(s,e,a){s.exports=a.p+"assets/img/1559544571527.46982880.png"},964:function(s,e,a){s.exports=a.p+"assets/img/1559544665373.999568d1.png"},965:function(s,e,a){s.exports=a.p+"assets/img/1559545652492.6f15e5de.png"}}]);