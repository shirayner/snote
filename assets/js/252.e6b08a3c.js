(window.webpackJsonp=window.webpackJsonp||[]).push([[252],{1301:function(a,s,t){"use strict";t.r(s);var e=t(4),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"kafka环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka环境搭建"}},[a._v("#")]),a._v(" Kafka环境搭建")]),a._v(" "),t("p",[a._v("[toc]")]),a._v(" "),t("h2",{attrs:{id:"推荐阅读"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推荐阅读"}},[a._v("#")]),a._v(" 推荐阅读")]),a._v(" "),t("blockquote",[t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/heibaiying/BigData-Notes/blob/master/notes/installation/%E5%9F%BA%E4%BA%8EZookeeper%E6%90%AD%E5%BB%BAKafka%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4.md",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[a._v("基于Zookeeper搭建Kafka高可用集群.md")]),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/luotianshuai/p/5206662.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kafka【第一篇】Kafka集群搭建"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.w3cschool.cn/apache_kafka/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Apache Kafka 教程_W3Cschool"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://juejin.cn/post/6844903800239570958",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kafka集群搭建及必知必会"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://kafka.apache.org/quickstart",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kafka quick start"),t("OutboundLink")],1)])])]),a._v(" "),t("h2",{attrs:{id:"一、环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、环境准备"}},[a._v("#")]),a._v(" 一、环境准备")]),a._v(" "),t("p",[a._v("需要先进行 Zookeeper环境搭建，可参考：")]),a._v(" "),t("blockquote",[t("p",[t("RouterLink",{attrs:{to:"/cs/backend/mq/Zookeeper/Zookeeper_01_环境搭建.html"}},[a._v("Zookeeper_01_环境搭建")])],1)]),a._v(" "),t("h2",{attrs:{id:"二、kafka-环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、kafka-环境搭建"}},[a._v("#")]),a._v(" 二、Kafka 环境搭建")]),a._v(" "),t("p",[a._v("搭建好Zookeeper环境之后，就可以开始部署Kafka了")]),a._v(" "),t("h3",{attrs:{id:"_1-下载并解压kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载并解压kafka"}},[a._v("#")]),a._v(" 1.下载并解压Kafka")]),a._v(" "),t("p",[a._v("前往官网下载Kafka")]),a._v(" "),t("blockquote",[t("p",[a._v("https://kafka.apache.org/downloads")])]),a._v(" "),t("p",[a._v("解压之后目录如下：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" -l "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$9")]),a._v("}'")]),a._v("\n\nbin/\nconfig/\nlibs/\nLICENSE\nNOTICE\nsite-docs/\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("h3",{attrs:{id:"_2-创建logs目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建logs目录"}},[a._v("#")]),a._v(" 2.创建logs目录")]),a._v(" "),t("p",[a._v("创建三个日志存储目录")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p logs/01 logs/02 logs/03\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-配置-server-properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置-server-properties"}},[a._v("#")]),a._v(" 3.配置 server.properties")]),a._v(" "),t("p",[a._v("（1）进入conf目录，复制 "),t("code",[a._v("server.properties")]),a._v("，并分别重命名为"),t("code",[a._v("server1.properties")]),a._v("、"),t("code",[a._v("server2.properties")]),a._v("、"),t("code",[a._v("server3.properties")])]),a._v(" "),t("p",[a._v("（2）然后修改这三个配置文件，需要修改下面四个属性")]),a._v(" "),t("blockquote",[t("ul",[t("li",[t("code",[a._v("broker.id")])]),a._v(" "),t("li",[t("code",[a._v("listeners")])]),a._v(" "),t("li",[t("code",[a._v("log.dirs")])]),a._v(" "),t("li",[t("code",[a._v("zookeeper.connect")])])])]),a._v(" "),t("p",[a._v("（3）修改后，各个配置文件的这四个属性分别为：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("server1.properties")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# The id of the broker. 集群中每个节点的唯一标识")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("broker.id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 监听地址")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("listeners")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("PLAINTEXT://localhost:9092")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 数据的存储位置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("log.dirs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("D:/dev-env/kafka/kafka_2.11-1.0.0/logs/01")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Zookeeper连接地址")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("zookeeper.connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("localhost:2181,localhost:2182,localhost:2183")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])])]),a._v(" "),t("li",[t("p",[a._v("server2.properties")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("broker.id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("listeners")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("PLAINTEXT://localhost:9093")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("log.dirs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("D:/dev-env/kafka/kafka_2.11-1.0.0/logs/02")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("zookeeper.connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("localhost:2181,localhost:2182,localhost:2183")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])])]),a._v(" "),t("li",[t("p",[a._v("server3.properties")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("broker.id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("listeners")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("PLAINTEXT://localhost:9094")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("log.dirs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("D:/dev-env/kafka/kafka_2.11-1.0.0/logs/03")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("zookeeper.connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("localhost:2181,localhost:2182,localhost:2183")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])])])]),a._v(" "),t("h3",{attrs:{id:"_4-启动broker集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动broker集群"}},[a._v("#")]),a._v(" 4.启动Broker集群")]),a._v(" "),t("p",[a._v("进入 bin/windows 目录，然后执行如下命令分别启动三个Kafka Broker 节点")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ./kafka-server-start.bat "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/config/server1.properties\n$ ./kafka-server-start.bat "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/config/server2.properties\n$ ./kafka-server-start.bat "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/config/server3.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h3",{attrs:{id:"_5-验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-验证"}},[a._v("#")]),a._v(" 5.验证")]),a._v(" "),t("p",[a._v("（1）创建测试主题")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ ./kafka-topics.bat --create --zookeeper localhost:2181 --replication-factor "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" --partitions "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" --topic hello-kafk\n\nCreated topic "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hello-kafka"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("（2）获取主题列表")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$  ./kafka-topics.bat  --list --zookeeper localhost:2181\nhello-kafka\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("（3）启动生产者以发送消息")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("./kafka-console-producer.bat --broker-list localhost:9092 --topic hello-kafka\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("（4）启动消费者以接收消息")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("./kafka-console-producer.bat  --zookeeper localhost:2181 —topic hello-kafka --from-beginning\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);