(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1412:function(s,r,t){"use strict";t.r(r);var a=t(4),e=Object(a.a)({},(function(){var s=this,r=s.$createElement,a=s._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("[TOC]")]),s._v(" "),a("h1",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("h1",{attrs:{id:"一、docker-hub-mirror"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、docker-hub-mirror"}},[s._v("#")]),s._v(" 一、Docker Hub Mirror")]),s._v(" "),a("p",[s._v("Docker Hub Mirror  可以提供Docker Registry（Docker Hub）在中国的镜像代理服务。")]),s._v(" "),a("p",[s._v("Docker Hub 在国内的镜像仓库主要有：")]),s._v(" "),a("blockquote",[a("ul",[a("li",[a("a",{attrs:{href:"https://link.jianshu.com/?t=https://www.daocloud.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("DaoCloud"),a("OutboundLink")],1),s._v("：首个提供国内免费Docker Hub镜像的团体")]),s._v(" "),a("li",[s._v("阿里云："),a("a",{attrs:{href:"https://cr.console.aliyun.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://cr.console.aliyun.com/"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("网易云："),a("a",{attrs:{href:"https://c.163.com/hub#/m/home/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://c.163.com/hub#/m/home/"),a("OutboundLink")],1)])])]),s._v(" "),a("h1",{attrs:{id:"二、阿里云镜像仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、阿里云镜像仓库"}},[s._v("#")]),s._v(" 二、阿里云镜像仓库")]),s._v(" "),a("h2",{attrs:{id:"_1-配置阿里云镜像加速器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置阿里云镜像加速器"}},[s._v("#")]),s._v(" 1.配置阿里云镜像加速器")]),s._v(" "),a("p",[s._v("（1）获取自己专属的加速器地址")]),s._v(" "),a("ul",[a("li",[s._v("登录阿里云管理后台 -> 产品与服务 -> 弹性计算 -> 容器镜像服务")])]),s._v(" "),a("p",[a("img",{attrs:{src:t(966),alt:"1559829420912"}})]),s._v(" "),a("ul",[a("li",[a("p",[s._v("容器镜像服务 -> 镜像中心 -> 镜像加速器 -> 复制加速器地址")]),s._v(" "),a("p",[a("img",{attrs:{src:t(967),alt:"1559829525255"}})])])]),s._v(" "),a("p",[s._v("（2）参照操作文档来配置 registry-mirrors")]),s._v(" "),a("p",[s._v("需要修改 daemon.json 配置文件，文件路径如下：")]),s._v(" "),a("blockquote",[a("ul",[a("li",[s._v("linux（ubuntu/centos）:  "),a("code",[s._v("/etc/docker/daemon.json")])]),s._v(" "),a("li",[s._v("windows : "),a("code",[s._v("C:\\Users\\shira\\.docker\\daemon.json")])])])]),s._v(" "),a("p",[s._v("将加速器地址添加到 registry-mirrors 中（下面的地址是无效的，需要填写你自己的地址）：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://bsddsdslfe.mirror.aliyuncs.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("然后重启docker即可")]),s._v(" "),a("h2",{attrs:{id:"_2-通过代码源创建镜像仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-通过代码源创建镜像仓库"}},[s._v("#")]),s._v(" 2.通过代码源创建镜像仓库")]),s._v(" "),a("p",[s._v("（1）首先要创建命名空间，用来管理一组镜像")]),s._v(" "),a("blockquote",[a("p",[s._v("容器镜像服务 -> 默认实例 -> 命名空间 -> 创建命名空间 -> 然后填写命名空间即可")])]),s._v(" "),a("p",[s._v("（2）创建镜像仓库")]),s._v(" "),a("blockquote",[a("ul",[a("li",[s._v("容器镜像服务 -> 默认实例 ->  镜像仓库 -> 创建镜像仓库 -> 然后填写仓库信息")])]),s._v(" "),a("p",[a("img",{attrs:{src:t(968),alt:"1559830596964"}})]),s._v(" "),a("ul",[a("li",[a("p",[s._v("选择一个代码托管平台 -> 然后选择一个代码仓库 -> 然后点击创建镜像即可")]),s._v(" "),a("p",[a("img",{attrs:{src:t(969),alt:"1559830687841"}})])])])]),s._v(" "),a("p",[s._v("（3）查看镜像信息")]),s._v(" "),a("p",[a("img",{attrs:{src:t(970),alt:"1559830778502"}})]),s._v(" "),a("p",[s._v("点击镜像名称，会出现镜像相关信息")]),s._v(" "),a("p",[a("img",{attrs:{src:t(971),alt:"1559830839446"}})]),s._v(" "),a("p",[s._v("注意仔细读一遍这里的操作指南")]),s._v(" "),a("h2",{attrs:{id:"_3-本地推送镜像到阿里云镜像仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-本地推送镜像到阿里云镜像仓库"}},[s._v("#")]),s._v(" 3.本地推送镜像到阿里云镜像仓库")]),s._v(" "),a("p",[s._v("根据上面的操作指南（以下内容就抄自这个操作指南）：")]),s._v(" "),a("h3",{attrs:{id:"_3-1-登录阿里云docker-registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-登录阿里云docker-registry"}},[s._v("#")]),s._v(" 3.1 登录阿里云Docker Registry")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker login --username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("shiray1994@163.com registry.cn-shanghai.aliyuncs.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("ul",[a("li",[s._v("用于登录的用户名为阿里云账号全名，密码为开通服务时设置的密码。")]),s._v(" "),a("li",[s._v("您可以在产品控制台首页修改登录密码。")])])]),s._v(" "),a("h3",{attrs:{id:"_3-2-从registry中拉取镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-从registry中拉取镜像"}},[s._v("#")]),s._v(" 3.2 从Registry中拉取镜像")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker pull registry.cn-shanghai.aliyuncs.com/ray-registry/2048:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("镜像版本号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-3-将镜像推送到registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-将镜像推送到registry"}},[s._v("#")]),s._v(" 3.3 将镜像推送到Registry")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ sudo docker login --username=shiray1994@163.com registry.cn-shanghai.aliyuncs.com\n$ sudo docker tag [ImageId] registry.cn-shanghai.aliyuncs.com/ray-registry/2048:[镜像版本号]\n$ sudo docker push registry.cn-shanghai.aliyuncs.com/ray-registry/2048:[镜像版本号]\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("请根据实际镜像信息替换示例中的[ImageId]和[镜像版本号]参数。")])])}),[],!1,null,null,null);r.default=e.exports},966:function(s,r,t){s.exports=t.p+"assets/img/1559829420912.23ad4b4b.png"},967:function(s,r,t){s.exports=t.p+"assets/img/1559829525255.02bf90f2.png"},968:function(s,r,t){s.exports=t.p+"assets/img/1559830596964.d5774aa7.png"},969:function(s,r,t){s.exports=t.p+"assets/img/1559830687841.02292549.png"},970:function(s,r,t){s.exports=t.p+"assets/img/1559830778502.e5bb4e8f.png"},971:function(s,r,t){s.exports=t.p+"assets/img/1559830839446.481f49e5.png"}}]);