(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1408:function(s,a,e){"use strict";e.r(a);var t=e(4),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("[TOC]")]),s._v(" "),t("h1",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[t("strong",[s._v("本系列总结转自"),t("a",{attrs:{href:"https://item.jd.com/11909234.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("《第一本Dokcer书》"),t("OutboundLink")],1),s._v("，仅作读书笔记用")])]),s._v(" "),t("h1",{attrs:{id:"一、docker-入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、docker-入门"}},[s._v("#")]),s._v(" 一、Docker 入门")]),s._v(" "),t("h2",{attrs:{id:"_1-确保docker已经就绪"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-确保docker已经就绪"}},[s._v("#")]),s._v(" 1.确保Docker已经就绪")]),s._v(" "),t("p",[s._v("可使用如下命令，若显示了 Dokcer 版本，则说明Docker已成功安装")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("λ docker -v\nDocker version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.09")]),s._v(".2, build "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6247962")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("也使用如下命令，查看Docker信息，该命令会返回")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("所有容器和镜像的数量")]),s._v(" "),t("li",[s._v("Docker使用的执行驱动和存储驱动")]),s._v(" "),t("li",[s._v("Docker的基本配置")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker info\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_2-运行我们的第一个容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-运行我们的第一个容器"}},[s._v("#")]),s._v(" 2.运行我们的第一个容器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" IMAGE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COMMAND"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ARG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("docker run")]),s._v("命令提供了 Docker 容器从创建到启动的功能")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run -it ubuntu /bin/bash \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("（1）首先，我们告诉Docker执行"),t("code",[s._v("docker run")]),s._v("命令，并指定了"),t("code",[s._v("-i")]),s._v("和"),t("code",[s._v("-t")]),s._v("两个命令行参数。")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("-i")]),s._v("：保持容器中 "),t("code",[s._v("STDIN")]),s._v("（标准输入）是开启的，不管我们是否附着到容器")]),s._v(" "),t("li",[t("code",[s._v("-t")]),s._v("：告诉Docker为要创建的容器分配一个伪tty终端")])]),s._v(" "),t("p",[s._v("（2）然后，我们告诉Docker基于什么镜像来创建容器，示例中使用的是ubuntu镜像")]),s._v(" "),t("p",[s._v("Docker 会检查本地是否存在 ubuntu镜像，如果本地没有，那么Docker会从 "),t("code",[s._v("Docker Hub")]),s._v("（Docker的中央仓库）查看是否有该镜像，若有，则下载并保存该镜像到本地宿主机。随后，Docker在文件系统内部用这个镜像创建了一个容器。")]),s._v(" "),t("p",[s._v("（3）最后，我们告诉Docker在新容器中要运行什么命令")]),s._v(" "),t("p",[s._v("示例中我们在容器中运行 /bin/bash 命令启动一个 Bash Shell")])]),s._v(" "),t("p",[s._v("上述命令会使用ubuntu镜像创建一个容器，并打开一个Bash shell。这是一个完整的 ubuntu 系统，可以用它做任何事：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("λ docker run -it ubuntu /bin/bash\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### 显示容器主机名")]),s._v("\nroot@d37ea6a71c62:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostname")]),s._v("\nd37ea6a71c62\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### 查看host文件")]),s._v("\nroot@d37ea6a71c62:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hosts")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2      d37ea6a71c62\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### 显示正在运行的进程")]),s._v("\nroot@d37ea6a71c62:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -aux")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18504")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3380")]),s._v(" pts/0    Ss   06:17   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 /bin/bash\nroot        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34396")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2864")]),s._v(" pts/0    R+   06:18   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### 显示文件列表")]),s._v("\nroot@d37ea6a71c62:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### 进入 /tmp 文件")]),s._v("\nroot@d37ea6a71c62:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /tmp")]),s._v("\nroot@d37ea6a71c62:/tmp"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### 创建文件")]),s._v("\nroot@d37ea6a71c62:/tmp"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch 1.txt")]),s._v("\nroot@d37ea6a71c62:/tmp"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#### 安装 vim 编辑器")]),s._v("\nroot@d37ea6a71c62:/tmp"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt-get update && apt-get install vim")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("p",[s._v("在容器中的 bash 命令行执行"),t("code",[s._v("exit")]),s._v("即可退出容器")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("root@d37ea6a71c62:/tmp# exit\nexit\n\nD:\\docker-repository\\hzero\nλ\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("只有在指定的 "),t("code",[s._v("/bin/bash")]),s._v(" 命令处于运行状态的时候，我们的容器也才会相应地处于运行状态。一旦退出容器，"),t("code",[s._v("/bin/bash")]),s._v("命令也就结束了，这时容器也随之停止了运行。")]),s._v(" "),t("h2",{attrs:{id:"_3-查看容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看容器"}},[s._v("#")]),s._v(" 3.查看容器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出正在运行的容器")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有容器，包括正在运行的和已经停止的")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:e(960),alt:"1559111684951"}})]),s._v(" "),t("p",[s._v("如图，可以看到 Docker 创建容器时，自动为容器生成了一个名称，这个名称是可以指定的")]),s._v(" "),t("h2",{attrs:{id:"_4-容器命名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-容器命名"}},[s._v("#")]),s._v(" 4.容器命名")]),s._v(" "),t("p",[s._v("通过"),t("code",[s._v("--name")]),s._v("参数可指定容器的名称，容器名称必须唯一")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run --name ray-ubuntu  -it ubuntu /bin/bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上述命令，以 ubuntu 为基础镜像，创建了一个名为 ray-ubuntu 的容器，并打开了一个 bash 命令行")]),s._v(" "),t("p",[s._v("注意：")]),s._v(" "),t("blockquote",[t("p",[s._v("在很多 docker 命令中，都可以使用容器名称代替容器ID，且能使用容器名称的地方都可以使用容器ID.")])]),s._v(" "),t("h2",{attrs:{id:"_5-重新启动已经停止的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-重新启动已经停止的容器"}},[s._v("#")]),s._v(" 5.重新启动已经停止的容器")]),s._v(" "),t("p",[s._v("例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker start  ray-ubuntu\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_6-附着到容器上"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-附着到容器上"}},[s._v("#")]),s._v(" 6.附着到容器上")]),s._v(" "),t("p",[s._v("Docker容器重新启动的时候，会沿用"),t("code",[s._v("docker run")]),s._v("命令时指定的参数来运行，因此我们的容器重新启动后会运行一个交互式会话shell。此外，也可以用"),t("code",[s._v("docker attach")]),s._v("命令，重新附着到该容器的会话上")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker attach ray-ubuntu\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_7-创建守护式容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-创建守护式容器"}},[s._v("#")]),s._v(" 7.创建守护式容器")]),s._v(" "),t("p",[s._v("通过 "),t("code",[s._v("-d")]),s._v("参数指定容器以守护进程的形式在后台长期运行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run --name daemon_dave -d ubuntu /bin/sh -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"while  true; do echo hello world; sleep 1; done"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("-c")]),s._v("参数指定容器运行后要执行的命令，这里我们让容器在后台不断打印 hello word")]),s._v(" "),t("p",[s._v("注：")]),s._v(" "),t("blockquote",[t("p",[s._v("在cmder中以 cmd.exe 来运行上述命令，会发现没用，改用 powershell.exe 或者 bash.exe 执行即可")])]),s._v(" "),t("h2",{attrs:{id:"_8-输出容器日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-输出容器日志"}},[s._v("#")]),s._v(" 8.输出容器日志")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("docker logs")]),s._v("命令，可以获取容器的日志")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("λ docker logs daemon_dave\nhello world\nhello world\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"_9-查看容器内的进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-查看容器内的进程"}},[s._v("#")]),s._v(" 9.查看容器内的进程")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("docker top")]),s._v("命令，可以查看容器内的进程")]),s._v(" "),t("p",[t("img",{attrs:{src:e(961),alt:"1559113145700"}})]),s._v(" "),t("h2",{attrs:{id:"_10-停止容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-停止容器"}},[s._v("#")]),s._v(" 10.停止容器")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("docker stop")]),s._v("命令，可停止守护式容器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker stop daemon_dave\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用如下命令，可停止所有容器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker stop "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -q"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_11-删除容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-删除容器"}},[s._v("#")]),s._v(" 11.删除容器")]),s._v(" "),t("p",[s._v("使用以下命令，删除指定容器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" daemon_dave\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用以下命令，删除所有容器（容器删除前必须先停止）")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aq"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用以下命令，停用并删除所有容器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker stop "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -q"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aq"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h1",{attrs:{id:"二、使用docker镜像和仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、使用docker镜像和仓库"}},[s._v("#")]),s._v(" 二、使用Docker镜像和仓库")]),s._v(" "),t("h2",{attrs:{id:"_1-什么是docker镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是docker镜像"}},[s._v("#")]),s._v(" 1.什么是Docker镜像")]),s._v(" "),t("h2",{attrs:{id:"_2-列出镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-列出镜像"}},[s._v("#")]),s._v(" 2.列出镜像")]),s._v(" "),t("p",[s._v("使用如下命令，列出docker镜像")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker images \t\t\t\t\t "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 列出所有镜像")]),s._v("\ndocker images ray-ubuntu         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 列出指定镜像")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_3-拉取镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-拉取镜像"}},[s._v("#")]),s._v(" 3.拉取镜像")]),s._v(" "),t("p",[s._v("使用如下命令，从Docker Hub 拉取镜像到本地，默认下载 latest 标签的，也可手动指定标签")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker pull fedora:20\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_4-查找镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-查找镜像"}},[s._v("#")]),s._v(" 4.查找镜像")]),s._v(" "),t("p",[s._v("使用如下命令，查找 Docker Hub 上公共的可用镜像")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker search  puppet\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:e(962),alt:"1559118015191"}})]),s._v(" "),t("p",[s._v("我们从上面的结果中拉取一个镜像")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker pull devopsil/puppet\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("接着可以用这个镜像构建一个容器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run -it devopsil/puppet /bin/bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_5-构建镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-构建镜像"}},[s._v("#")]),s._v(" 5.构建镜像")]),s._v(" "),t("p",[s._v("构建Docker镜像有如下两种方式：")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("使用 docker commit 命令")]),s._v(" "),t("li",[s._v("编写Dockerfile之后使用 docker build 命令")])])]),s._v(" "),t("h3",{attrs:{id:"_5-1-使用-docker-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-使用-docker-commit"}},[s._v("#")]),s._v(" 5.1 使用 docker commit")]),s._v(" "),t("p",[s._v("创建 Docker 镜像的第一种方法是使用"),t("code",[s._v("docker commit")]),s._v("命令。可以将此想象为我们是在往版本控制系统里提交变更。我们先创建一个容器，并在容器里做出修改，就像修改代码一样，最后再将修改提交为一个新镜像。")]),s._v(" "),t("p",[s._v("（1）先从创建一个新容器开始，这个容器基于我们前面已经见过的ubuntu镜像")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run -it ubuntu /bin/bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（2）接下来安装 Apache")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@3698d234aae2:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt-get  update")]),s._v("\nroot@3698d234aae2:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt-get -y install apache2")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("（3）这样，我们就启动了一个容器，并在里面安装了Apache。我们会将这个容器作为一个Web服务器来运行，所以我们想把它的当前状态保存下来。这样就不必每次都创建一个新容器并再次在里面安装Apache了。")]),s._v(" "),t("p",[s._v("为了完成此项工作，需要先使用exit命令从容器里退出，之后再运行 "),t("code",[s._v("docker commit")]),s._v("命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker commit 3698d234aae2 shirayenr/apache2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("ul",[t("li",[t("p",[t("code",[s._v("3698d234aae2")]),s._v("：指定刚刚修改的容器id，可用"),t("code",[s._v("docker ps -a")]),s._v("来查看")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("shirayenr/apache2")]),s._v(": 指定目标镜像仓库和镜像名")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("docker commit")]),s._v("提交的只是创建容器的镜像与容器的当前状态之间有差异的部分")])])])]),s._v(" "),t("p",[s._v("也可以在提交时指定更多的信息")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker commit -m"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"A new custom image"')]),s._v(" -a"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shirayenr"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("img_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" shirayenr/apache2:webserver\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("ul",[t("li",[t("code",[s._v("-m")]),s._v("：指定提交信息")]),s._v(" "),t("li",[t("code",[s._v("-a")]),s._v(": 指定该镜像的作者")]),s._v(" "),t("li",[s._v("接着就是镜像id")]),s._v(" "),t("li",[s._v("最后的 "),t("code",[s._v("shirayenr/apache2:webserver")]),s._v("则指定了 仓库名、镜像名、标签")])])]),s._v(" "),t("p",[s._v("如果想从刚刚创建的一个镜像来运行容器：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run -it shirayenr/apache2:webserver /bin/bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_5-2-使用-dockerfile构建镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-使用-dockerfile构建镜像"}},[s._v("#")]),s._v(" 5.2 使用 Dockerfile构建镜像")]),s._v(" "),t("h4",{attrs:{id:"_5-2-1-编写-dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-编写-dockerfile"}},[s._v("#")]),s._v(" 5.2.1 编写 Dockerfile")]),s._v(" "),t("p",[s._v("（1）首先创建一个目录并在里面创建初始的Dockerfile")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" static_web\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" static_web\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" Dockerfile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("这个目录就是我们的构建环境（build environment），Docker则称此环境为上下文（context）或构建上下文（build context）。")]),s._v(" "),t("p",[s._v("Docker 会在构建镜像时将构建上下文和该上下文中的文件和目录上传到Docker的守护进程。")]),s._v(" "),t("p",[s._v("（2）编写 Dockerfile")]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Version 0.0.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ubuntu"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("14.04\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" shirayenr "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1766211120@qq.com"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" apt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("get update && apt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("get install "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("y nginx\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hi, I am in your container'")]),s._v(" \\\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("/usr/share/nginx/html/index.html\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 80\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("该Dockerfile由一系列指令和参数组成。每条指令，如FROM，都必须为大写字母，且后面要跟随一个参数，"),t("strong",[s._v("Dockerfile中的指令会按顺序从上到下执行，每条指令都会创建一个新的镜像层并对镜像进行提交")]),s._v("。Docker大体上按照如下流程执行Dockerfile中的指令：")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("Docker从基础镜像运行一个容器。")]),s._v(" "),t("li",[s._v("执行一条指令，对容器做出修改。")]),s._v(" "),t("li",[s._v("执行类似dockercommit的操作，提交一个新的镜像层。")]),s._v(" "),t("li",[s._v("Docker再基于刚提交的镜像运行一个新容器。")]),s._v(" "),t("li",[s._v("执行Dockerfile中的下一条指令，直到所有指令都执行完毕。")])])]),s._v(" "),t("p",[s._v("（3）指令含义：")]),s._v(" "),t("blockquote",[t("ul",[t("li",[t("p",[s._v("FORM：指定基础镜像")]),s._v(" "),t("blockquote",[t("p",[s._v("每个Dockerfile的第一条指令必须是FROM。FROM指令指定一个已经存在的镜像，后续指令都将基于该镜像进行，这个镜像被称为"),t("strong",[s._v("基础镜像")]),s._v("（baseiamge）。")])])]),s._v(" "),t("li",[t("p",[s._v("MAINTAINER ： 维护者")]),s._v(" "),t("blockquote",[t("p",[s._v("这条指令会告诉Docker该镜像的作者是谁，以及作者的电子邮件地址。这有助于标识镜像的所有者和联系方式。")])])]),s._v(" "),t("li",[t("p",[s._v("RUN：运行指定命令")]),s._v(" "),t("blockquote",[t("ul",[t("li",[t("p",[s._v("RUN指令会在当前镜像中运行指定的命令")])]),s._v(" "),t("li",[t("p",[s._v("每条RUN指令都会创建一个新的镜像层，如果该指令执行成功，就会将此镜像层提交，之后继续执行Dockerfile中的下一条指令。")])]),s._v(" "),t("li",[t("p",[s._v("默认情况下，RUN指令会在shell里使用命令包装器/bin/sh-c来执行。如果是在一个不支持shell的平台上运行或者不希望在shell中运行（比如避免shell字符串篡改），也可以使用exec格式的RUN指令：")]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apt-get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" install"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-y"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在这种方式中，我们使用一个数组来指定要运行的命令和传递给该命令的每个参数。")])])])])]),s._v(" "),t("li",[t("p",[s._v("EXPOSE：指定对外暴露的端口")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("这条指令告诉Docker该容器内的应用程序将会使用容器的指定端口")]),s._v(" "),t("li",[s._v("若外部想访问容器内的应用程序，则需要在执行 docker run 命令时，建立本地宿主机与Docker容器的端口映射关系")])])])])])]),s._v(" "),t("h4",{attrs:{id:"_5-2-2-基于dockerfile构建镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-基于dockerfile构建镜像"}},[s._v("#")]),s._v(" 5.2.2 基于Dockerfile构建镜像")]),s._v(" "),t("p",[s._v("执行"),t("code",[s._v("docker build")]),s._v("命令时，Dockerfile中的所有指令都会被执行并且提交，并且在该命令成功结束后返回一个新镜像。")]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[s._v("docker build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("t="),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shirayner/static_web:v1"')]),s._v(" .\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("ul",[t("li",[t("p",[t("code",[s._v("docker build")]),s._v("：构建镜像")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("-t")]),s._v("：为新镜像设置仓库、名称、标签")])]),s._v(" "),t("li",[t("p",[t("code",[s._v(".")]),s._v("：当前目录。告诉docker到本地当前目录中寻找 Dockerfile 文件，也可执行一个git仓库地址来指定 Dockerfile的位置：")]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[s._v("docker build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("t="),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shirayner/static_web:v1"')]),s._v("  \\ git@github.com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("shirayner/docker"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("static"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("web.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])]),s._v(" "),t("h4",{attrs:{id:"_5-2-3-从新镜像启动容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-3-从新镜像启动容器"}},[s._v("#")]),s._v(" 5.2.3 从新镜像启动容器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run -d -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" --name static_web shirayner/static_web:v1  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("　nginx -g "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemon off;"')]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("我使用 "),t("code",[s._v("docker run")]),s._v("命令，基于刚才构建的镜像的名字，启动了一个名为 static_web 的新容器。")]),s._v(" "),t("blockquote",[t("ul",[t("li",[t("p",[s._v("我们同时指定了"),t("code",[s._v("-d")]),s._v("选项，告诉Docker以分离（detached）的方式在后台运行。")])]),s._v(" "),t("li",[t("p",[s._v('我们也指定了需要在容器中运行的命令：nginx -g "daemon off;"。')])]),s._v(" "),t("li",[t("p",[t("code",[s._v("-p")]),s._v("：指定Docker容器端口与本地宿主机端口的映射关系")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Docker可以在宿主机上随机选择一个位于32768~61000的一个比较大的端口号来映射到容器中的80端口上。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker run -d -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" --name static_web shirayner/static_web:v1  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("　nginx -g "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemon off;"')]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("可以在Docker宿主机中指定一个具体的端口号（8088）来映射到容器中的80端口上。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('docker run -d -p 8088:80 --name static_web shirayner/static_web:v1  \\　nginx -g "daemon off;" \n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])])])]),s._v(" "),t("p",[s._v("容器启动成功后，可以通过如下命令查看本地宿主机与容器的端口映射关系")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker ps -l\ndokcer port static_web 80\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_6-将镜像推送到docker-hub"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-将镜像推送到docker-hub"}},[s._v("#")]),s._v(" 6.将镜像推送到Docker Hub")]),s._v(" "),t("h2",{attrs:{id:"_7-删除镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-删除镜像"}},[s._v("#")]),s._v(" 7.删除镜像")]),s._v(" "),t("p",[s._v("删除指定镜像")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker rmi shirayner/static_web:v1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("删除所有镜像")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker rmi "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker images -aq"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://item.jd.com/11909234.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("《第一本Dokcer书》"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports},960:function(s,a,e){s.exports=e.p+"assets/img/1559111684951.c983e725.png"},961:function(s,a,e){s.exports=e.p+"assets/img/1559113145700.331c4415.png"},962:function(s,a,e){s.exports=e.p+"assets/img/1559118015191.349b43a3.png"}}]);